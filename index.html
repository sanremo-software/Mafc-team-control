
<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAFC & FILHO, LDA. - Sistema de Gestão</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #1a5f7a;
            --secondary: #2d9cdb;
            --accent: #ff9f1c;
            --dark: #003049;
            --light: #f8f9fa;
            --success: #27ae60;
            --warning: #f39c12;
            --danger: #e74c3c;
            --construction: #e67e22;
            --boss: #8e44ad;
            --team: #3498db;
            --purchase: #2ecc71;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: var(--light);
            overflow-x: hidden;
        }

        /* ============ PÁGINA PÚBLICA ============ */
        #publicWebsite {
            min-height: 100vh;
        }

        /* Header Publico */
        .public-header {
            background: linear-gradient(135deg, var(--dark), var(--primary));
            color: white;
            padding: 1.5rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }

        .container {
            width: 90%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo i {
            font-size: 2.8rem;
            color: var(--accent);
        }

        .logo-text h1 {
            font-size: 1.8rem;
            font-weight: 800;
        }

        .logo-text span {
            color: var(--accent);
            font-size: 1rem;
            display: block;
            margin-top: 5px;
        }

        .cta-buttons {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .btn {
            padding: 12px 30px;
            border-radius: 50px;
            font-weight: 600;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            white-space: nowrap;
        }

        .btn-whatsapp {
            background: #25D366;
            color: white;
        }

        .btn-whatsapp:hover {
            background: #1da851;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(37, 211, 102, 0.4);
        }

        .btn-email {
            background: var(--accent);
            color: var(--dark);
        }

        .btn-email:hover {
            background: #ffb143;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 159, 28, 0.3);
        }

        .btn-login {
            background: var(--primary);
            color: white;
        }

        .btn-login:hover {
            background: var(--dark);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(26, 95, 122, 0.3);
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(0, 48, 73, 0.88), rgba(0, 48, 73, 0.92)), 
                        url('https://images.unsplash.com/photo-1504307651254-35680f356dfd?ixlib=rb-4.0.3&auto=format&fit=crop&w=1800&q=80');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: white;
            padding: 220px 0 150px;
            text-align: center;
            margin-top: 80px;
        }

        .hero h2 {
            font-size: 3.8rem;
            margin-bottom: 25px;
            font-weight: 900;
            text-transform: uppercase;
            text-shadow: 3px 3px 8px rgba(0,0,0,0.4);
            line-height: 1.2;
        }

        .hero p {
            font-size: 1.4rem;
            max-width: 850px;
            margin: 0 auto 50px;
            opacity: 0.95;
            line-height: 1.8;
        }

        .hero-buttons {
            display: flex;
            gap: 25px;
            justify-content: center;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        /* Services Grid */
        .services {
            padding: 120px 0;
            background: white;
        }

        .section-title {
            text-align: center;
            font-size: 2.8rem;
            color: var(--dark);
            margin-bottom: 70px;
            position: relative;
            font-weight: 800;
        }

        .section-title:after {
            content: '';
            position: absolute;
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 5px;
            background: var(--accent);
            border-radius: 10px;
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 35px;
            margin-top: 60px;
        }

        .service-card {
            background: var(--light);
            padding: 45px 35px;
            border-radius: 15px;
            text-align: center;
            transition: all 0.4s;
            border: 3px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .service-card:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: var(--accent);
            transform: translateY(-100%);
            transition: transform 0.3s;
        }

        .service-card:hover {
            transform: translateY(-15px);
            border-color: var(--accent);
            box-shadow: 0 20px 40px rgba(0,0,0,0.12);
        }

        .service-card:hover:before {
            transform: translateY(0);
        }

        .service-icon {
            font-size: 3.5rem;
            color: var(--primary);
            margin-bottom: 25px;
        }

        .service-card h3 {
            font-size: 1.7rem;
            margin-bottom: 20px;
            color: var(--dark);
            font-weight: 700;
        }

        /* Company Stats */
        .company-info {
            padding: 120px 0;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 40px;
            margin-top: 60px;
        }

        .stat-card {
            background: white;
            padding: 40px 30px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            border-top: 6px solid var(--accent);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-10px);
        }

        .stat-card i {
            font-size: 3.5rem;
            color: var(--primary);
            margin-bottom: 20px;
        }

        .stat-card h3 {
            font-size: 3.2rem;
            color: var(--dark);
            margin-bottom: 10px;
            font-weight: 800;
        }

        /* Gallery */
        .gallery {
            padding: 120px 0;
            background: white;
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
            margin-top: 60px;
        }

        .gallery-item {
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            height: 280px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s;
        }

        .gallery-item:hover img {
            transform: scale(1.15);
        }

        /* Quote Section */
        .quote-request {
            background: linear-gradient(135deg, var(--dark), var(--primary));
            color: white;
            padding: 100px 0;
            text-align: center;
        }

        .quote-request h2 {
            font-size: 2.8rem;
            margin-bottom: 25px;
            font-weight: 800;
        }

        .quote-buttons {
            display: flex;
            gap: 25px;
            justify-content: center;
            margin-top: 50px;
            flex-wrap: wrap;
        }

        /* Footer */
        .public-footer {
            background: var(--dark);
            color: white;
            padding: 80px 0 40px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 50px;
            margin-bottom: 50px;
        }

        .copyright {
            text-align: center;
            padding-top: 40px;
            border-top: 1px solid rgba(255,255,255,0.15);
            color: rgba(255,255,255,0.7);
            font-size: 0.95rem;
        }

        /* ============ MODAL LOGIN ============ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: white;
            width: 90%;
            max-width: 500px;
            border-radius: 20px;
            overflow: hidden;
            animation: modalSlideIn 0.4s;
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
        }

        @keyframes modalSlideIn {
            from { transform: translateY(-50px) scale(0.9); opacity: 0; }
            to { transform: translateY(0) scale(1); opacity: 1; }
        }

        .modal-header {
            background: linear-gradient(135deg, var(--dark), var(--primary));
            color: white;
            padding: 25px;
            text-align: center;
            position: relative;
        }

        .modal-header h2 {
            font-size: 2rem;
            font-weight: 700;
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 25px;
            font-size: 1.8rem;
            cursor: pointer;
            color: white;
            transition: color 0.3s;
        }

        .close-modal:hover {
            color: var(--accent);
        }

        .modal-body {
            padding: 50px;
        }

        .form-group {
            margin-bottom: 30px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            color: var(--dark);
            font-weight: 600;
            font-size: 1.1rem;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1.1rem;
            transition: all 0.3s;
            background: #f8f9fa;
        }

        .form-group input:focus, .form-group select:focus {
            border-color: var(--primary);
            outline: none;
            background: white;
            box-shadow: 0 0 0 3px rgba(26, 95, 122, 0.1);
        }

        .login-submit {
            background: linear-gradient(135deg, var(--primary), var(--dark));
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .login-submit:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(26, 95, 122, 0.3);
            background: linear-gradient(135deg, var(--dark), var(--primary));
        }

        /* ============ DASHBOARDS HORIZONTAIS ============ */
        .dashboard {
            display: none;
            min-height: 100vh;
            background: #f0f2f5;
        }

        /* Top Bar Horizontal */
        .top-bar {
            background: white;
            padding: 0;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            border-bottom: 5px solid;
        }

        /* Cores diferentes para cada dashboard */
        .boss-dashboard .top-bar {
            border-bottom-color: var(--boss);
            background: linear-gradient(135deg, #9b59b6, var(--boss));
        }

        .team-dashboard .top-bar {
            border-bottom-color: var(--team);
            background: linear-gradient(135deg, #3498db, #2980b9);
        }

        .purchase-dashboard .top-bar {
            border-bottom-color: var(--purchase);
            background: linear-gradient(135deg, #2ecc71, #27ae60);
        }

        .top-bar-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .dashboard-brand {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .dashboard-brand i {
            font-size: 2.2rem;
            color: white;
        }

        .dashboard-brand h1 {
            color: white;
            font-size: 1.8rem;
            font-weight: 700;
        }

        .dashboard-info {
            display: flex;
            align-items: center;
            gap: 25px;
            color: white;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
            background: rgba(255,255,255,0.15);
            padding: 10px 20px;
            border-radius: 50px;
            backdrop-filter: blur(10px);
        }

        .user-info i {
            font-size: 1.4rem;
        }

        .logout-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            padding: 10px 25px;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
            backdrop-filter: blur(10px);
        }

        .logout-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
            border-color: white;
        }

        /* Menu Horizontal */
        .horizontal-menu {
            background: white;
            margin-top: 70px;
            padding: 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            position: fixed;
            width: 100%;
            z-index: 999;
            overflow-x: auto;
        }

        .menu-container {
            display: flex;
            gap: 5px;
            padding: 0;
            width: 100%;
        }

        .menu-item {
            padding: 20px 30px;
            color: #555;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 15px;
            font-weight: 600;
            white-space: nowrap;
            border-bottom: 4px solid transparent;
            transition: all 0.3s;
            position: relative;
        }

        .menu-item:hover {
            color: var(--primary);
            background: #f8f9fa;
        }

        .menu-item.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
            background: #f0f7ff;
        }

        .menu-item i {
            font-size: 1.2rem;
        }

        .menu-badge {
            background: var(--accent);
            color: white;
            font-size: 0.75rem;
            padding: 3px 8px;
            border-radius: 20px;
            margin-left: 8px;
            font-weight: 700;
        }

        /* Conteúdo do Dashboard */
        .dashboard-content {
            margin-top: 140px;
            padding: 30px;
            background: #f0f2f5;
            min-height: calc(100vh - 140px);
        }

        /* Cards de Estatísticas */
        .stats-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .stat-card-horizontal {
            background: white;
            padding: 30px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            gap: 25px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
            border-left: 6px solid;
            transition: transform 0.3s;
        }

        .stat-card-horizontal:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.12);
        }

        .boss-dashboard .stat-card-horizontal { border-left-color: var(--boss); }
        .team-dashboard .stat-card-horizontal { border-left-color: var(--team); }
        .purchase-dashboard .stat-card-horizontal { border-left-color: var(--purchase); }

        .stat-icon {
            width: 70px;
            height: 70px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.2rem;
            color: white;
        }

        .boss-dashboard .stat-icon { background: linear-gradient(135deg, var(--boss), #9b59b6); }
        .team-dashboard .stat-icon { background: linear-gradient(135deg, var(--team), #3498db); }
        .purchase-dashboard .stat-icon { background: linear-gradient(135deg, var(--purchase), #2ecc71); }

        .stat-info h3 {
            font-size: 2.5rem;
            color: var(--dark);
            margin-bottom: 5px;
            font-weight: 800;
        }

        .stat-info p {
            color: #666;
            font-weight: 600;
            font-size: 1.1rem;
        }

        /* Grids de Conteúdo */
        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        /* Cards de Conteúdo */
        .content-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
            transition: transform 0.3s;
        }

        .content-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.12);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
        }

        .card-header h3 {
            color: var(--dark);
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .card-header h3 i {
            color: var(--primary);
        }

        /* Botões */
        .btn-dashboard {
            padding: 12px 25px;
            border-radius: 10px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            font-size: 1rem;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--dark);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(26, 95, 122, 0.3);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #219653;
            transform: translateY(-3px);
        }

        .btn-warning {
            background: var(--warning);
            color: white;
        }

        .btn-warning:hover {
            background: #e67e22;
            transform: translateY(-3px);
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-danger:hover {
            background: #c0392b;
            transform: translateY(-3px);
        }

        /* Tabelas */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .data-table th {
            background: var(--primary);
            color: white;
            padding: 20px;
            text-align: left;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .data-table td {
            padding: 18px 20px;
            border-bottom: 1px solid #f0f0f0;
        }

        .data-table tr:hover {
            background: #f8f9fa;
        }

        /* Badges */
        .badge {
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 700;
            display: inline-block;
        }

        .badge-success { background: #d5f4e6; color: var(--success); }
        .badge-warning { background: #fff3cd; color: var(--warning); }
        .badge-danger { background: #f8d7da; color: var(--danger); }
        .badge-primary { background: #d1ecf1; color: var(--secondary); }
        .badge-info { background: #d1ecf1; color: #17a2b8; }

        /* Formulários */
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 25px;
        }

        .form-group-dashboard {
            margin-bottom: 25px;
        }

        .form-group-dashboard label {
            display: block;
            margin-bottom: 12px;
            color: var(--dark);
            font-weight: 600;
            font-size: 1.1rem;
        }

        .form-group-dashboard input,
        .form-group-dashboard select,
        .form-group-dashboard textarea {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1.1rem;
            transition: all 0.3s;
            background: #f8f9fa;
        }

        .form-group-dashboard input:focus,
        .form-group-dashboard select:focus,
        .form-group-dashboard textarea:focus {
            border-color: var(--primary);
            outline: none;
            background: white;
            box-shadow: 0 0 0 3px rgba(26, 95, 122, 0.1);
        }

        .form-actions {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
            margin-top: 40px;
            padding-top: 25px;
            border-top: 2px solid #f0f0f0;
        }

        /* Time Tracker */
        .time-tracker {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .time-display {
            font-size: 4rem;
            font-weight: 800;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .time-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        /* Material Categories */
        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .category-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
        }

        .category-card:hover {
            transform: translateY(-8px);
            border-color: var(--accent);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }

        .category-card i {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 15px;
        }

        /* GPS Tracker */
        .gps-tracker {
            background: linear-gradient(135deg, #11998e, #38ef7d);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .gps-info {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .gps-coordinates {
            font-family: monospace;
            font-size: 1.3rem;
            background: rgba(255,255,255,0.15);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        /* Responsividade */
        @media (max-width: 1200px) {
            .content-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 992px) {
            .hero h2 {
                font-size: 2.8rem;
            }
            
            .section-title {
                font-size: 2.3rem;
            }
            
            .menu-container {
                overflow-x: auto;
                padding-bottom: 10px;
            }
            
            .menu-item {
                padding: 15px 20px;
                font-size: 0.95rem;
            }
        }

        @media (max-width: 768px) {
            .hero {
                padding: 180px 0 100px;
            }
            
            .hero h2 {
                font-size: 2.2rem;
            }
            
            .hero p {
                font-size: 1.2rem;
            }
            
            .stats-row {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .top-bar-content {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .dashboard-info {
                flex-direction: column;
                gap: 15px;
            }
            
            .menu-item {
                padding: 12px 15px;
            }
        }

        @media (max-width: 480px) {
            .hero h2 {
                font-size: 1.8rem;
            }
            
            .section-title {
                font-size: 1.8rem;
            }
            
            .btn {
                padding: 10px 20px;
                font-size: 0.9rem;
            }
            
            .content-card {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- ============ PÁGINA PÚBLICA ============ -->
    <div id="publicWebsite">
        <!-- Header Público -->
        <header class="public-header">
            <div class="container nav-container">
                <div class="logo">
                    <i class="fas fa-hard-hat"></i>
                    <div class="logo-text">
                        <h1>MAFC & FILHO, LDA.</h1>
                        <span>Construção Civil & Obras Públicas | Desde 2001</span>
                    </div>
                </div>
                <div class="cta-buttons">
                    <a href="https://wa.me/351123456789?text=Olá MAFC,%20gostaria%20de%20solicitar%20um%20orçamento%20para%20uma%20obra" 
                       class="btn btn-whatsapp" target="_blank">
                        <i class="fab fa-whatsapp"></i> WhatsApp
                    </a>
                    <a href="mailto:orcamentos@mafc-filho.pt?subject=Solicitação de Orçamento&body=Olá MAFC,%0D%0A%0D%0AGostaria de solicitar um orçamento para:" 
                       class="btn btn-email">
                        <i class="fas fa-envelope"></i> Pedir Orçamento
                    </a>
                    <a href="#" class="btn btn-login" id="openLogin">
                        <i class="fas fa-sign-in-alt"></i> Acesso Sistema
                    </a>
                </div>
            </div>
        </header>

        <!-- Hero Section -->
        <section class="hero">
            <div class="container">
                <h2>Especialistas em Construção Civil e Obras Públicas</h2>
                <p>Mais de 20 anos de experiência em saneamento, abastecimento de água, redes de fibra óptica, pavimentação e infraestruturas. Operação em Portugal e Alemanha com 15 equipas especializadas.</p>
                <div class="hero-buttons">
                    <a href="#services" class="btn btn-email">
                        <i class="fas fa-hard-hat"></i> Nossos Serviços
                    </a>
                    <a href="#quote" class="btn btn-whatsapp">
                        <i class="fas fa-calculator"></i> Orçamento Grátis
                    </a>
                </div>
            </div>
        </section>

        <!-- Services -->
        <section class="services" id="services">
            <div class="container">
                <h2 class="section-title">Serviços Especializados</h2>
                <div class="services-grid">
                    <div class="service-card">
                        <div class="service-icon">
                            <i class="fas fa-water"></i>
                        </div>
                        <h3>Saneamento e Águas</h3>
                        <p>Redes de águas pluviais, sistemas de drenagem e abastecimento de água potável.</p>
                    </div>
                    <div class="service-card">
                        <div class="service-icon">
                            <i class="fas fa-satellite-dish"></i>
                        </div>
                        <h3>Redes de Fibra Óptica</h3>
                        <p>Instalação e manutenção de infraestruturas de telecomunicações.</p>
                    </div>
                    <div class="service-card">
                        <div class="service-icon">
                            <i class="fas fa-road"></i>
                        </div>
                        <h3>Pavimentação</h3>
                        <p>Pavimentação em cubo, betuminosa e reabilitação de vias públicas.</p>
                    </div>
                    <div class="service-card">
                        <div class="service-icon">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <h3>Redes EDP e Gás</h3>
                        <p>Instalação de infraestruturas elétricas e de gás natural.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Company Info -->
        <section class="company-info">
            <div class="container">
                <h2 class="section-title">MAFC em Números</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <i class="fas fa-calendar-alt"></i>
                        <h3>20+</h3>
                        <p>Anos de Experiência</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-users"></i>
                        <h3>40+</h3>
                        <p>Colaboradores</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-hard-hat"></i>
                        <h3>15</h3>
                        <p>Equipas Ativas</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-globe-europe"></i>
                        <h3>2</h3>
                        <p>Países de Operação</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Quote Request -->
        <section class="quote-request" id="quote">
            <div class="container">
                <h2>Solicite um Orçamento Gratuito</h2>
                <p>Tem um projeto de construção? Entre em contacto connosco para uma avaliação personalizada.</p>
                <div class="quote-buttons">
                    <a href="https://wa.me/351123456789?text=Olá MAFC,%20gostaria%20de%20solicitar%20um%20orçamento%20para%20uma%20obra" 
                       class="btn btn-whatsapp" target="_blank">
                        <i class="fab fa-whatsapp"></i> WhatsApp
                    </a>
                    <a href="mailto:orcamentos@mafc-filho.pt?subject=Solicitação de Orçamento&body=Olá MAFC,%0D%0A%0D%0AGostaria de solicitar um orçamento para:" 
                       class="btn btn-email">
                        <i class="fas fa-envelope"></i> Email
                    </a>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="public-footer">
            <div class="container">
                <div class="footer-content">
                    <div>
                        <h3>MAFC & FILHO, LDA.</h3>
                        <p>Constituída em 2001, somos especialistas em construção civil e obras públicas com operação em Portugal e Alemanha.</p>
                    </div>
                </div>
                <div class="copyright">
                    <p>&copy; 2001-2024 MAFC & FILHO, LDA. - Todos os direitos reservados.</p>
                </div>
            </div>
        </footer>
    </div>

    <!-- ============ MODAL DE LOGIN ============ -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-lock"></i> Acesso ao Sistema MAFC</h2>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="loginForm">
                    <div class="form-group">
                        <label for="username"><i class="fas fa-user"></i> Código de Acesso</label>
                        <input type="text" id="username" placeholder="Digite seu código" required>
                    </div>
                    <div class="form-group">
                        <label for="password"><i class="fas fa-key"></i> Senha</label>
                        <input type="password" id="password" placeholder="Digite sua senha" required>
                    </div>
                    <div class="form-group">
                        <label for="role"><i class="fas fa-user-tag"></i> Tipo de Acesso</label>
                        <select id="role" required>
                            <option value="">Selecione o tipo de acesso</option>
                            <option value="boss">Patrão/Administrador</option>
                            <option value="team">Chefe de Equipa</option>
                            <option value="purchase">Responsável de Compras</option>
                        </select>
                    </div>
                    <button type="submit" class="login-submit">
                        <i class="fas fa-sign-in-alt"></i> Entrar no Sistema
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- ============ DASHBOARD DO PATRÃO ============ -->
    <div class="dashboard boss-dashboard" id="bossDashboard">
        <!-- Top Bar -->
        <div class="top-bar">
            <div class="container top-bar-content">
                <div class="dashboard-brand">
                    <i class="fas fa-crown"></i>
                    <h1>Painel do Patrão - MAFC Team Control</h1>
                </div>
                <div class="dashboard-info">
                    <div class="user-info">
                        <i class="fas fa-user-circle"></i>
                        <span id="bossUserName">Administrador MAFC</span>
                    </div>
                    <div id="bossCurrentTime" style="font-weight: 600;">10:45 AM</div>
                    <button class="logout-btn" id="bossLogoutBtn">
                        <i class="fas fa-sign-out-alt"></i> Sair
                    </button>
                </div>
            </div>
        </div>

        <!-- Menu Horizontal -->
        <nav class="horizontal-menu">
            <div class="container menu-container">
                <a href="#" class="menu-item active" data-section="overview">
                    <i class="fas fa-tachometer-alt"></i> Visão Geral
                </a>
                <a href="#" class="menu-item" data-section="teams">
                    <i class="fas fa-users"></i> 15 Equipas
                    <span class="menu-badge">15</span>
                </a>
                <a href="#" class="menu-item" data-section="works">
                    <i class="fas fa-hard-hat"></i> Obras Alemanha
                    <span class="menu-badge">8</span>
                </a>
                <a href="#" class="menu-item" data-section="hours">
                    <i class="fas fa-clock"></i> Controlo de Horas
                    <span class="menu-badge">42</span>
                </a>
                <a href="#" class="menu-item" data-section="materials">
                    <i class="fas fa-boxes"></i> Pedidos Material
                    <span class="menu-badge">12</span>
                </a>
                <a href="#" class="menu-item" data-section="purchases">
                    <i class="fas fa-shopping-cart"></i> Compras
                    <span class="menu-badge">24</span>
                </a>
                <a href="#" class="menu-item" data-section="expenses">
                    <i class="fas fa-euro-sign"></i> Despesas
                </a>
                <a href="#" class="menu-item" data-section="reports">
                    <i class="fas fa-chart-bar"></i> Relatórios
                </a>
                <a href="#" class="menu-item" data-section="accounting">
                    <i class="fas fa-file-invoice-dollar"></i> Contabilidade
                </a>
            </div>
        </nav>

        <!-- Conteúdo -->
        <div class="dashboard-content">
            <!-- Seção Visão Geral -->
            <div class="dashboard-section active" id="overviewSection">
                <div class="stats-row">
                    <div class="stat-card-horizontal">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <h3>15</h3>
                            <p>Equipas Ativas</p>
                        </div>
                    </div>
                    <div class="stat-card-horizontal">
                        <div class="stat-icon">
                            <i class="fas fa-hard-hat"></i>
                        </div>
                        <div class="stat-info">
                            <h3>42</h3>
                            <p>Trabalhadores</p>
                        </div>
                    </div>
                    <div class="stat-card-horizontal">
                        <div class="stat-icon">
                            <i class="fas fa-euro-sign"></i>
                        </div>
                        <div class="stat-info">
                            <h3>8</h3>
                            <p>Obras Alemanha</p>
                        </div>
                    </div>
                    <div class="stat-card-horizontal">
                        <div class="stat-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-info">
                            <h3>12</h3>
                            <p>Pedidos Pendentes</p>
                        </div>
                    </div>
                </div>

                <div class="content-grid">
                    <div class="content-card">
                        <div class="card-header">
                            <h3><i class="fas fa-map-marker-alt"></i> Equipas em Tempo Real - Alemanha</h3>
                            <button class="btn-dashboard btn-primary" onclick="refreshLocations()">
                                <i class="fas fa-sync-alt"></i> Atualizar
                            </button>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Equipa</th>
                                    <th>Localização</th>
                                    <th>Obra</th>
                                    <th>Estado</th>
                                    <th>GPS</th>
                                </tr>
                            </thead>
                            <tbody id="bossTeamsTable">
                                <tr>
                                    <td><strong>Equipa 01 - Berlin</strong></td>
                                    <td>Berlim, Kreuzberg</td>
                                    <td>Saneamento Urbano</td>
                                    <td><span class="badge badge-success">A Trabalhar</span></td>
                                    <td>52.5200° N</td>
                                </tr>
                                <tr>
                                    <td><strong>Equipa 02 - Hamburg</strong></td>
                                    <td>Hamburgo, Centro</td>
                                    <td>Pavimentação</td>
                                    <td><span class="badge badge-success">A Trabalhar</span></td>
                                    <td>53.5511° N</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="content-card">
                        <div class="card-header">
                            <h3><i class="fas fa-exclamation-circle"></i> Pedidos Urgentes</h3>
                            <button class="btn-dashboard btn-warning" onclick="viewAllRequests()">
                                <i class="fas fa-eye"></i> Ver Todos
                            </button>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Equipa</th>
                                    <th>Material</th>
                                    <th>Quantidade</th>
                                    <th>Urgência</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="urgentRequestsTable">
                                <tr>
                                    <td>Equipa 03</td>
                                    <td>Cimento</td>
                                    <td>50 sacos</td>
                                    <td><span class="badge badge-danger">CRÍTICO</span></td>
                                    <td>
                                        <button class="btn-dashboard btn-success btn-sm" onclick="approveRequest(1)">
                                            <i class="fas fa-check"></i>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Seção Equipas -->
            <div class="dashboard-section" id="teamsSection">
                <div class="content-card">
                    <div class="card-header">
                        <h3><i class="fas fa-users"></i> Gestão das 15 Equipas</h3>
                        <button class="btn-dashboard btn-primary" onclick="addNewTeam()">
                            <i class="fas fa-plus"></i> Nova Equipa
                        </button>
                    </div>
                    <div class="form-row">
                        <input type="text" placeholder="Pesquisar equipa..." id="teamSearch">
                        <select id="teamFilter">
                            <option value="all">Todas as equipas</option>
                            <option value="germany">Alemanha</option>
                            <option value="portugal">Portugal</option>
                        </select>
                    </div>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Equipa</th>
                                <th>Chefe</th>
                                <th>Localização</th>
                                <th>Obra</th>
                                <th>Trabalhadores</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="allTeamsTable">
                            <!-- Equipas serão carregadas aqui -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Seção Controlo de Horas -->
            <div class="dashboard-section" id="hoursSection">
                <div class="content-card">
                    <div class="card-header">
                        <h3><i class="fas fa-clock"></i> Controlo de Horas - Todas as Equipas</h3>
                        <button class="btn-dashboard btn-success" onclick="exportHours()">
                            <i class="fas fa-file-export"></i> Exportar
                        </button>
                    </div>
                    
                    <div class="time-tracker">
                        <div class="time-display" id="bossCurrentTimeFull">10:45:23</div>
                        <div class="time-buttons">
                            <button class="btn-dashboard btn-warning" onclick="simulateClockIn()">
                                <i class="fas fa-sign-in-alt"></i> Simular Entrada
                            </button>
                            <button class="btn-dashboard btn-danger" onclick="simulateClockOut()">
                                <i class="fas fa-sign-out-alt"></i> Simular Saída
                            </button>
                        </div>
                    </div>

                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Trabalhador</th>
                                <th>Equipa</th>
                                <th>Entrada</th>
                                <th>Saída</th>
                                <th>Total</th>
                                <th>Banco Horas</th>
                            </tr>
                        </thead>
                        <tbody id="hoursTable">
                            <tr>
                                <td>João Silva</td>
                                <td>Equipa 01</td>
                                <td>08:00</td>
                                <td>16:30</td>
                                <td>8.5h</td>
                                <td><span class="badge badge-warning">+0.5h</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Seção Contabilidade -->
            <div class="dashboard-section" id="accountingSection">
                <div class="content-card">
                    <div class="card-header">
                        <h3><i class="fas fa-file-invoice-dollar"></i> Contabilidade - Banco de Horas (>160h)</h3>
                        <button class="btn-dashboard btn-success" onclick="exportToAccounting()">
                            <i class="fas fa-file-excel"></i> Exportar Excel
                        </button>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group-dashboard">
                            <label>Mês de Referência</label>
                            <select id="accountingMonth">
                                <option value="12">Dezembro 2024</option>
                                <option value="11">Novembro 2024</option>
                            </select>
                        </div>
                        <div class="form-group-dashboard">
                            <label>Filtrar por Equipa</label>
                            <select id="accountingTeam">
                                <option value="all">Todas as Equipas</option>
                                <option value="team01">Equipa 01 - Berlin</option>
                            </select>
                        </div>
                    </div>

                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Trabalhador</th>
                                <th>Equipa</th>
                                <th>Horas Normais</th>
                                <th>Horas Extra</th>
                                <th>Total</th>
                                <th>Banco Horas</th>
                                <th>Valor</th>
                            </tr>
                        </thead>
                        <tbody id="accountingTable">
                            <tr>
                                <td>João Silva</td>
                                <td>Equipa 01</td>
                                <td>160</td>
                                <td>12</td>
                                <td>172</td>
                                <td><span class="badge badge-danger">+12h</span></td>
                                <td>360€</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- ============ DASHBOARD DO CHEFE DE EQUIPA ============ -->
    <div class="dashboard team-dashboard" id="teamDashboard">
        <!-- Top Bar -->
        <div class="top-bar">
            <div class="container top-bar-content">
                <div class="dashboard-brand">
                    <i class="fas fa-hard-hat"></i>
                    <h1>Chefe de Equipa - MAFC Team Control</h1>
                </div>
                <div class="dashboard-info">
                    <div class="user-info">
                        <i class="fas fa-user-hard-hat"></i>
                        <span id="teamUserName">Equipa 01 - Berlin</span>
                    </div>
                    <div id="teamCurrentTime" style="font-weight: 600;">10:45 AM</div>
                    <button class="logout-btn" id="teamLogoutBtn">
                        <i class="fas fa-sign-out-alt"></i> Sair
                    </button>
                </div>
            </div>
        </div>

        <!-- Menu Horizontal -->
        <nav class="horizontal-menu">
            <div class="container menu-container">
                <a href="#" class="menu-item active" data-section="teamOverview">
                    <i class="fas fa-home"></i> Visão da Equipa
                </a>
                <a href="#" class="menu-item" data-section="teamTime">
                    <i class="fas fa-clock"></i> Controlo de Horas
                </a>
                <a href="#" class="menu-item" data-section="teamMaterials">
                    <i class="fas fa-boxes"></i> Pedir Materiais
                </a>
                <a href="#" class="menu-item" data-section="teamWorkers">
                    <i class="fas fa-user-plus"></i> Trabalhadores
                </a>
                <a href="#" class="menu-item" data-section="teamLocation">
                    <i class="fas fa-map-marker-alt"></i> Localização
                </a>
                <a href="#" class="menu-item" data-section="teamExpenses">
                    <i class="fas fa-euro-sign"></i> Despesas
                </a>
                <a href="#" class="menu-item" data-section="teamReports">
                    <i class="fas fa-file-alt"></i> Relatórios
                </a>
            </div>
        </nav>

        <!-- Conteúdo -->
        <div class="dashboard-content">
            <!-- Visão da Equipa -->
            <div class="dashboard-section active" id="teamOverviewSection">
                <div class="stats-row">
                    <div class="stat-card-horizontal">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="teamWorkersCount">5</h3>
                            <p>Trabalhadores Ativos</p>
                        </div>
                    </div>
                    <div class="stat-card-horizontal">
                        <div class="stat-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="teamHoursToday">4.5</h3>
                            <p>Horas Hoje</p>
                        </div>
                    </div>
                    <div class="stat-card-horizontal">
                        <div class="stat-icon">
                            <i class="fas fa-box"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="teamPendingMaterials">3</h3>
                            <p>Pedidos Pendentes</p>
                        </div>
                    </div>
                    <div class="stat-card-horizontal">
                        <div class="stat-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="teamStatus">Online</h3>
                            <p>Estado da Equipa</p>
                        </div>
                    </div>
                </div>

                <div class="content-grid">
                    <div class="content-card">
                        <div class="card-header">
                            <h3><i class="fas fa-clock"></i> Registos de Hoje</h3>
                            <button class="btn-dashboard btn-primary" onclick="registerAllEntry()">
                                <i class="fas fa-users"></i> Entrada Todos
                            </button>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Trabalhador</th>
                                    <th>Entrada</th>
                                    <th>Saída</th>
                                    <th>Total</th>
                                    <th>Horas Extra</th>
                                </tr>
                            </thead>
                            <tbody id="teamTimeRecords">
                                <tr>
                                    <td>João Silva (Chefe)</td>
                                    <td>08:00</td>
                                    <td>-</td>
                                    <td>-</td>
                                    <td>-</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="content-card">
                        <div class="card-header">
                            <h3><i class="fas fa-box"></i> Pedidos Recentes</h3>
                            <button class="btn-dashboard btn-success" onclick="requestMaterial()">
                                <i class="fas fa-plus"></i> Novo Pedido
                            </button>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Material</th>
                                    <th>Quantidade</th>
                                    <th>Data</th>
                                    <th>Estado</th>
                                </tr>
                            </thead>
                            <tbody id="teamMaterialRequests">
                                <tr>
                                    <td>Cimento</td>
                                    <td>50 sacos</td>
                                    <td>10/12/2024</td>
                                    <td><span class="badge badge-warning">Pendente</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Controlo de Horas -->
            <div class="dashboard-section" id="teamTimeSection">
                <div class="content-card">
                    <div class="card-header">
                        <h3><i class="fas fa-clock"></i> Controlo de Horas - Tempo Real</h3>
                        <div class="time-display" style="font-size: 2.5rem; color: var(--team);">
                            08:45:23
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group-dashboard">
                            <label>Trabalhador</label>
                            <select id="workerSelect">
                                <option value="1">João Silva (Chefe)</option>
                                <option value="2">Carlos Mendes</option>
                                <option value="3">Miguel Santos</option>
                            </select>
                        </div>
                        <div class="form-group-dashboard">
                            <label>Ação</label>
                            <select id="timeAction">
                                <option value="start">Entrada (Stempel)</option>
                                <option value="end">Saída (Ausstempel)</option>
                            </select>
                        </div>
                        <div class="form-group-dashboard">
                            <label>Hora Atual</label>
                            <input type="text" id="currentTimeInput" value="08:45" readonly>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button class="btn-dashboard btn-success" onclick="registerTime()">
                            <i class="fas fa-check"></i> Registar Hora
                        </button>
                        <button class="btn-dashboard btn-primary" onclick="registerAllTeam('start')">
                            <i class="fas fa-users"></i> Entrada Toda Equipa
                        </button>
                        <button class="btn-dashboard btn-warning" onclick="registerAllTeam('end')">
                            <i class="fas fa-users"></i> Saída Toda Equipa
                        </button>
                    </div>
                </div>
            </div>

            <!-- Pedir Materiais -->
            <div class="dashboard-section" id="teamMaterialsSection">
                <div class="content-card">
                    <div class="card-header">
                        <h3><i class="fas fa-boxes"></i> Pedido de Material para Obra</h3>
                        <span class="badge badge-info">Envia automaticamente para Compras</span>
                    </div>

                    <div class="categories-grid">
                        <div class="category-card" onclick="selectCategory('construction')">
                            <i class="fas fa-brick"></i>
                            <h4>Materiais Construção</h4>
                            <p>Cimento, areia, brita...</p>
                        </div>
                        <div class="category-card" onclick="selectCategory('machines')">
                            <i class="fas fa-tractor"></i>
                            <h4>Máquinas</h4>
                            <p>Retroescavadoras, camiões...</p>
                        </div>
                        <div class="category-card" onclick="selectCategory('tools')">
                            <i class="fas fa-tools"></i>
                            <h4>Ferramentas</h4>
                            <p>Equipamentos especializados</p>
                        </div>
                        <div class="category-card" onclick="selectCategory('consumables')">
                            <i class="fas fa-gas-pump"></i>
                            <h4>Consumíveis</h4>
                            <p>Gasóleo, óleo, EPIs...</p>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group-dashboard">
                            <label>Categoria</label>
                            <select id="materialCategory" onchange="loadMaterials()">
                                <option value="construction">Materiais de Construção</option>
                                <option value="machines">Máquinas e Equipamentos</option>
                                <option value="tools">Ferramentas</option>
                                <option value="consumables">Consumíveis</option>
                            </select>
                        </div>
                        <div class="form-group-dashboard">
                            <label>Material</label>
                            <select id="materialSelect">
                                <option value="cement">Cimento</option>
                                <option value="sand">Areia</option>
                                <option value="gravel">Brita</option>
                            </select>
                        </div>
                        <div class="form-group-dashboard">
                            <label>Quantidade</label>
                            <input type="number" id="materialQuantity" min="1" value="1">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group-dashboard">
                            <label>Unidade</label>
                            <select id="materialUnit">
                                <option value="sacos">sacos</option>
                                <option value="ton">toneladas</option>
                                <option value="m3">m³</option>
                                <option value="litros">litros</option>
                            </select>
                        </div>
                        <div class="form-group-dashboard">
                            <label>Urgência</label>
                            <select id="materialUrgency">
                                <option value="normal">Normal (1-2 semanas)</option>
                                <option value="urgent">Urgente (3-5 dias)</option>
                                <option value="critical">Crítico (24-48h)</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group-dashboard">
                        <label>Observações</label>
                        <textarea id="materialNotes" rows="3" placeholder="Detalhes sobre o material necessário..."></textarea>
                    </div>

                    <div class="form-actions">
                        <button class="btn-dashboard btn-success" onclick="submitMaterialRequest()">
                            <i class="fas fa-paper-plane"></i> Enviar para Compras
                        </button>
                        <button class="btn-dashboard btn-primary" onclick="addCustomMaterial()">
                            <i class="fas fa-plus"></i> Material Personalizado
                        </button>
                    </div>
                </div>
            </div>

            <!-- Localização -->
            <div class="dashboard-section" id="teamLocationSection">
                <div class="content-card">
                    <div class="card-header">
                        <h3><i class="fas fa-map-marker-alt"></i> Localização GPS da Equipa</h3>
                        <span class="badge badge-success">Patrão vê em tempo real</span>
                    </div>

                    <div class="gps-tracker">
                        <div class="gps-info">
                            <i class="fas fa-satellite" style="font-size: 3rem;"></i>
                            <div class="gps-coordinates">
                                <div>Latitude: <strong id="gpsLat">52.5200° N</strong></div>
                                <div>Longitude: <strong id="gpsLng">13.4050° E</strong></div>
                            </div>
                        </div>
                        <div style="text-align: center;">
                            <p>Localização atual: <strong>Berlim, Kreuzberg - Obra de Saneamento</strong></p>
                            <div class="time-buttons">
                                <button class="btn-dashboard btn-success" onclick="updateGPSLocation()">
                                    <i class="fas fa-sync-alt"></i> Atualizar Localização
                                </button>
                                <button class="btn-dashboard btn-primary" onclick="sendLocationToBoss()">
                                    <i class="fas fa-paper-plane"></i> Enviar ao Patrão
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ============ DASHBOARD DE COMPRAS ============ -->
    <div class="dashboard purchase-dashboard" id="purchaseDashboard">
        <!-- Top Bar -->
        <div class="top-bar">
            <div class="container top-bar-content">
                <div class="dashboard-brand">
                    <i class="fas fa-shopping-cart"></i>
                    <h1>Responsável de Compras - MAFC</h1>
                </div>
                <div class="dashboard-info">
                    <div class="user-info">
                        <i class="fas fa-user-tie"></i>
                        <span id="purchaseUserName">Departamento Compras</span>
                    </div>
                    <div id="purchaseCurrentTime" style="font-weight: 600;">10:45 AM</div>
                    <button class="logout-btn" id="purchaseLogoutBtn">
                        <i class="fas fa-sign-out-alt"></i> Sair
                    </button>
                </div>
            </div>
        </div>

        <!-- Menu Horizontal -->
        <nav class="horizontal-menu">
            <div class="container menu-container">
                <a href="#" class="menu-item active" data-section="purchaseOverview">
                    <i class="fas fa-tachometer-alt"></i> Visão Geral
                </a>
                <a href="#" class="menu-item" data-section="pendingRequests">
                    <i class="fas fa-clipboard-list"></i> Pedidos Pendentes
                    <span class="menu-badge">12</span>
                </a>
                <a href="#" class="menu-item" data-section="approvedPurchases">
                    <i class="fas fa-check-circle"></i> Compras Aprovadas
                    <span class="menu-badge">24</span>
                </a>
                <a href="#" class="menu-item" data-section="suppliers">
                    <i class="fas fa-truck"></i> Fornecedores
                </a>
                <a href="#" class="menu-item" data-section="budget">
                    <i class="fas fa-chart-pie"></i> Orçamento
                </a>
                <a href="#" class="menu-item" data-section="purchaseReports">
                    <i class="fas fa-file-invoice"></i> Faturas
                </a>
            </div>
        </nav>

        <!-- Conteúdo -->
        <div class="dashboard-content">
            <!-- Visão Geral Compras -->
            <div class="dashboard-section active" id="purchaseOverviewSection">
                <div class="stats-row">
                    <div class="stat-card-horizontal">
                        <div class="stat-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="pendingCount">12</h3>
                            <p>Pedidos Pendentes</p>
                        </div>
                    </div>
                    <div class="stat-card-horizontal">
                        <div class="stat-icon">
                            <i class="fas fa-check"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="approvedCount">24</h3>
                            <p>Compras Aprovadas</p>
                        </div>
                    </div>
                    <div class="stat-card-horizontal">
                        <div class="stat-icon">
                            <i class="fas fa-euro-sign"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="monthBudget">18.5K</h3>
                            <p>Orçamento Mês (€)</p>
                        </div>
                    </div>
                    <div class="stat-card-horizontal">
                        <div class="stat-icon">
                            <i class="fas fa-truck"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="suppliersCount">8</h3>
                            <p>Fornecedores Ativos</p>
                        </div>
                    </div>
                </div>

                <div class="content-grid">
                    <div class="content-card">
                        <div class="card-header">
                            <h3><i class="fas fa-exclamation-triangle"></i> Pedidos Urgentes</h3>
                            <button class="btn-dashboard btn-warning" onclick="processAllUrgent()">
                                <i class="fas fa-bolt"></i> Processar Todos
                            </button>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Equipa</th>
                                    <th>Material</th>
                                    <th>Quantidade</th>
                                    <th>Urgência</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="urgentPurchaseRequests">
                                <tr>
                                    <td>Equipa 03 - Munich</td>
                                    <td>Cimento</td>
                                    <td>50 sacos</td>
                                    <td><span class="badge badge-danger">CRÍTICO</span></td>
                                    <td>
                                        <button class="btn-dashboard btn-success btn-sm" onclick="approvePurchase(1)">
                                            <i class="fas fa-check"></i>
                                        </button>
                                        <button class="btn-dashboard btn-danger btn-sm" onclick="rejectPurchase(1)">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="content-card">
                        <div class="card-header">
                            <h3><i class="fas fa-shopping-cart"></i> Últimas Compras</h3>
                            <button class="btn-dashboard btn-primary" onclick="newPurchase()">
                                <i class="fas fa-plus"></i> Nova Compra
                            </button>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Nº Encomenda</th>
                                    <th>Fornecedor</th>
                                    <th>Material</th>
                                    <th>Valor</th>
                                    <th>Entrega</th>
                                </tr>
                            </thead>
                            <tbody id="recentPurchases">
                                <tr>
                                    <td>#ENCM-001</td>
                                    <td>Fornecedor A</td>
                                    <td>Cimento</td>
                                    <td>1.250€</td>
                                    <td><span class="badge badge-success">15/12</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Pedidos Pendentes -->
            <div class="dashboard-section" id="pendingRequestsSection">
                <div class="content-card">
                    <div class="card-header">
                        <h3><i class="fas fa-clipboard-list"></i> Todos os Pedidos Pendentes</h3>
                        <div>
                            <button class="btn-dashboard btn-success" onclick="approveAll()">
                                <i class="fas fa-check-double"></i> Aprovar Todos
                            </button>
                            <button class="btn-dashboard btn-danger" onclick="rejectAll()">
                                <i class="fas fa-ban"></i> Recusar Todos
                            </button>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group-dashboard">
                            <label>Filtrar por Equipa</label>
                            <select id="filterByTeam">
                                <option value="all">Todas as Equipas</option>
                                <option value="team01">Equipa 01 - Berlin</option>
                            </select>
                        </div>
                        <div class="form-group-dashboard">
                            <label>Filtrar por Urgência</label>
                            <select id="filterByUrgency">
                                <option value="all">Todas</option>
                                <option value="critical">Crítico</option>
                                <option value="urgent">Urgente</option>
                            </select>
                        </div>
                        <div class="form-group-dashboard">
                            <label>Pesquisar Material</label>
                            <input type="text" id="searchMaterial" placeholder="Nome do material...">
                        </div>
                    </div>

                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Equipa</th>
                                <th>Material</th>
                                <th>Quantidade</th>
                                <th>Urgência</th>
                                <th>Pedido por</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="allPendingRequests">
                            <tr>
                                <td>10/12/2024</td>
                                <td>Equipa 03 - Munich</td>
                                <td>Cimento</td>
                                <td>50 sacos</td>
                                <td><span class="badge badge-danger">CRÍTICO</span></td>
                                <td>Miguel Santos</td>
                                <td>
                                    <button class="btn-dashboard btn-success" onclick="approvePurchase(1)">
                                        <i class="fas fa-check"></i> Aprovar
                                    </button>
                                    <button class="btn-dashboard btn-danger" onclick="rejectPurchase(1)">
                                        <i class="fas fa-times"></i> Recusar
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Compras Aprovadas -->
            <div class="dashboard-section" id="approvedPurchasesSection">
                <div class="content-card">
                    <div class="card-header">
                        <h3><i class="fas fa-check-circle"></i> Compras Aprovadas e Encomendadas</h3>
                        <button class="btn-dashboard btn-primary" onclick="registerNewOrder()">
                            <i class="fas fa-plus"></i> Nova Encomenda
                        </button>
                    </div>

                    <div class="form-row">
                        <div class="form-group-dashboard">
                            <label>Fornecedor</label>
                            <select id="supplierSelect">
                                <option value="all">Todos Fornecedores</option>
                                <option value="supplierA">Fornecedor A</option>
                            </select>
                        </div>
                        <div class="form-group-dashboard">
                            <label>Estado</label>
                            <select id="orderStatus">
                                <option value="all">Todos</option>
                                <option value="ordered">Encomendado</option>
                                <option value="delivered">Entregue</option>
                            </select>
                        </div>
                    </div>

                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Nº Encomenda</th>
                                <th>Fornecedor</th>
                                <th>Material</th>
                                <th>Quantidade</th>
                                <th>Valor</th>
                                <th>Data Entrega</th>
                                <th>Estado</th>
                                <th>Fatura</th>
                            </tr>
                        </thead>
                        <tbody id="approvedPurchasesTable">
                            <tr>
                                <td><strong>#ENCM-001</strong></td>
                                <td>Fornecedor A</td>
                                <td>Cimento</td>
                                <td>50 sacos</td>
                                <td>1.250€</td>
                                <td>15/12/2024</td>
                                <td><span class="badge badge-warning">Encomendado</span></td>
                                <td>
                                    <button class="btn-dashboard btn-primary btn-sm">
                                        <i class="fas fa-file-invoice"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ============ SISTEMA COMPLETO MAFC ============
        
        // Dados do Sistema
        const MAFCSystem = {
            // Credenciais de acesso
            credentials: {
                // PATRÃO/ADMIN - Acesso total de qualquer país
                boss: [
                    { code: 'mafc', password: '1234', name: 'Administrador MAFC' },
                    { code: 'patrao', password: 'admin123', name: 'Patrão Portugal' },
                    { code: 'admin', password: 'mafc2024', name: 'Administrador Geral' }
                ],
                
                // CHEFES DE EQUIPA (15 equipas)
                team: [
                    { code: 'equipa01', password: '1234', name: 'João Silva', team: 'Equipa 01 - Berlin' },
                    { code: 'equipa02', password: '1234', name: 'Carlos Mendes', team: 'Equipa 02 - Hamburg' },
                    { code: 'equipa03', password: '1234', name: 'Miguel Santos', team: 'Equipa 03 - Munich' },
                    { code: 'equipa04', password: '1234', name: 'António Oliveira', team: 'Equipa 04 - Cologne' },
                    { code: 'equipa05', password: '1234', name: 'Pedro Costa', team: 'Equipa 05 - Frankfurt' },
                    { code: 'equipa06', password: '1234', name: 'Rui Pereira', team: 'Equipa 06 - Stuttgart' },
                    { code: 'equipa07', password: '1234', name: 'José Martins', team: 'Equipa 07 - Düsseldorf' },
                    { code: 'equipa08', password: '1234', name: 'Luís Fernandes', team: 'Equipa 08 - Dortmund' },
                    { code: 'equipa09', password: '1234', name: 'Fernando Rodrigues', team: 'Equipa 09 - Essen' },
                    { code: 'equipa10', password: '1234', name: 'Hugo Santos', team: 'Equipa 10 - Leipzig' },
                    { code: 'equipa11', password: '1234', name: 'Paulo Gomes', team: 'Equipa 11 - Bremen' },
                    { code: 'equipa12', password: '1234', name: 'André Lopes', team: 'Equipa 12 - Dresden' },
                    { code: 'equipa13', password: '1234', name: 'Ricardo Alves', team: 'Equipa 13 - Hannover' },
                    { code: 'equipa14', password: '1234', name: 'Mário Sousa', team: 'Equipa 14 - Nuremberga' },
                    { code: 'equipa15', password: '1234', name: 'Bruno Costa', team: 'Equipa 15 - Duisburg' }
                ],
                
                // RESPONSÁVEL DE COMPRAS
                purchase: [
                    { code: 'compras', password: '1234', name: 'Responsável Compras' },
                    { code: 'compras1', password: 'mafc123', name: 'Departamento Compras' }
                ]
            },
            
            // Dados das 15 equipas
            teams: [
                { id: 1, name: 'Equipa 01 - Berlin', leader: 'João Silva', location: 'Berlim, Kreuzberg', workers: 5, status: 'working', gps: '52.5200° N, 13.4050° E' },
                { id: 2, name: 'Equipa 02 - Hamburg', leader: 'Carlos Mendes', location: 'Hamburgo, Centro', workers: 3, status: 'working', gps: '53.5511° N, 9.9937° E' },
                { id: 3, name: 'Equipa 03 - Munich', leader: 'Miguel Santos', location: 'Munique, Subúrbios', workers: 4, status: 'working', gps: '48.1351° N, 11.5820° E' },
                { id: 4, name: 'Equipa 04 - Cologne', leader: 'António Oliveira', location: 'Colónia', workers: 4, status: 'working', gps: '50.9375° N, 6.9603° E' },
                { id: 5, name: 'Equipa 05 - Frankfurt', leader: 'Pedro Costa', location: 'Frankfurt', workers: 3, status: 'working', gps: '50.1109° N, 8.6821° E' },
                { id: 6, name: 'Equipa 06 - Stuttgart', leader: 'Rui Pereira', location: 'Estugarda', workers: 4, status: 'working', gps: '48.7758° N, 9.1829° E' },
                { id: 7, name: 'Equipa 07 - Düsseldorf', leader: 'José Martins', location: 'Düsseldorf', workers: 3, status: 'working', gps: '51.2277° N, 6.7735° E' },
                { id: 8, name: 'Equipa 08 - Dortmund', leader: 'Luís Fernandes', location: 'Dortmund', workers: 5, status: 'working', gps: '51.5136° N, 7.4653° E' },
                { id: 9, name: 'Equipa 09 - Essen', leader: 'Fernando Rodrigues', location: 'Essen', workers: 4, status: 'working', gps: '51.4556° N, 7.0116° E' },
                { id: 10, name: 'Equipa 10 - Leipzig', leader: 'Hugo Santos', location: 'Leipzig', workers: 3, status: 'working', gps: '51.3397° N, 12.3731° E' },
                { id: 11, name: 'Equipa 11 - Bremen', leader: 'Paulo Gomes', location: 'Bremen', workers: 4, status: 'working', gps: '53.0793° N, 8.8017° E' },
                { id: 12, name: 'Equipa 12 - Dresden', leader: 'André Lopes', location: 'Dresden', workers: 3, status: 'working', gps: '51.0504° N, 13.7373° E' },
                { id: 13, name: 'Equipa 13 - Hannover', leader: 'Ricardo Alves', location: 'Hanôver', workers: 5, status: 'working', gps: '52.3759° N, 9.7320° E' },
                { id: 14, name: 'Equipa 14 - Nuremberga', leader: 'Mário Sousa', location: 'Nuremberga', workers: 4, status: 'working', gps: '49.4521° N, 11.0767° E' },
                { id: 15, name: 'Equipa 15 - Duisburg', leader: 'Bruno Costa', location: 'Duisburgo', workers: 3, status: 'working', gps: '51.4344° N, 6.7623° E' }
            ],
            
            // Materiais de construção
            materials: {
                construction: [
                    { id: 1, name: 'Cimento', unit: 'sacos', averagePrice: 5 },
                    { id: 2, name: 'Areia', unit: 'm³', averagePrice: 25 },
                    { id: 3, name: 'Brita', unit: 'm³', averagePrice: 30 },
                    { id: 4, name: 'Alcatrão', unit: 'ton', averagePrice: 150 },
                    { id: 5, name: 'Tijolos', unit: 'unidades', averagePrice: 0.5 },
                    { id: 6, name: 'Tubos PVC', unit: 'unidades', averagePrice: 8 },
                    { id: 7, name: 'Aço para Construção', unit: 'kg', averagePrice: 1.2 },
                    { id: 8, name: 'Madeira', unit: 'm³', averagePrice: 400 }
                ],
                machines: [
                    { id: 9, name: 'Retroescavadora', unit: 'horas', averagePrice: 60 },
                    { id: 10, name: 'Camião Basculante', unit: 'dias', averagePrice: 200 },
                    { id: 11, name: 'Betoneira', unit: 'dias', averagePrice: 80 },
                    { id: 12, name: 'Compactador', unit: 'horas', averagePrice: 45 },
                    { id: 13, name: 'Grua', unit: 'dias', averagePrice: 300 },
                    { id: 14, name: 'Escavadora', unit: 'horas', averagePrice: 70 }
                ],
                tools: [
                    { id: 15, name: 'Martelo Pneumático', unit: 'unidades', averagePrice: 250 },
                    { id: 16, name: 'Cortadora de Pavimento', unit: 'unidades', averagePrice: 400 },
                    { id: 17, name: 'Betoneira Portátil', unit: 'unidades', averagePrice: 600 },
                    { id: 18, name: 'Furadeira de Concreto', unit: 'unidades', averagePrice: 180 }
                ],
                consumables: [
                    { id: 19, name: 'Gasóleo', unit: 'litros', averagePrice: 1.6 },
                    { id: 20, name: 'Óleo Motor', unit: 'litros', averagePrice: 8 },
                    { id: 21, name: 'Luvas de Trabalho', unit: 'pares', averagePrice: 3 },
                    { id: 22, name: 'Capacetes de Segurança', unit: 'unidades', averagePrice: 12 },
                    { id: 23, name: 'Óculos de Proteção', unit: 'unidades', averagePrice: 5 }
                ]
            },
            
            // Pedidos de material
            materialRequests: [],
            
            // Registos de horas
            timeRecords: [],
            
            // Compras aprovadas
            purchases: []
        };
        
        // Usuário atual
        let currentUser = null;
        
        // ============ FUNÇÕES DE LOGIN ============
        document.getElementById('openLogin').addEventListener('click', (e) => {
            e.preventDefault();
            document.getElementById('loginModal').style.display = 'flex';
        });
        
        document.querySelector('.close-modal').addEventListener('click', () => {
            document.getElementById('loginModal').style.display = 'none';
        });
        
        window.addEventListener('click', (e) => {
            if (e.target === document.getElementById('loginModal')) {
                document.getElementById('loginModal').style.display = 'none';
            }
        });
        
        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const role = document.getElementById('role').value;
            
            let userFound = null;
            
            // Verificar credenciais baseado no tipo de acesso
            if (role === 'boss') {
                userFound = MAFCSystem.credentials.boss.find(u => 
                    u.code === username && u.password === password
                );
            } else if (role === 'team') {
                userFound = MAFCSystem.credentials.team.find(u => 
                    u.code === username && u.password === password
                );
            } else if (role === 'purchase') {
                userFound = MAFCSystem.credentials.purchase.find(u => 
                    u.code === username && u.password === password
                );
            }
            
            if (userFound) {
                currentUser = { ...userFound, role };
                loginSuccess();
            } else {
                alert('❌ Credenciais incorretas! Utilize:\n\nPATRÃO: mafc / 1234\nCHEFE: equipa01 / 1234\nCOMPRAS: compras / 1234');
            }
        });
        
        function loginSuccess() {
            document.getElementById('loginModal').style.display = 'none';
            document.getElementById('publicWebsite').style.display = 'none';
            
            // Mostrar dashboard apropriado
            if (currentUser.role === 'boss') {
                showBossDashboard();
            } else if (currentUser.role === 'team') {
                showTeamDashboard();
            } else if (currentUser.role === 'purchase') {
                showPurchaseDashboard();
            }
            
            // Inicializar dados
            initializeDashboard();
        }
        
        // ============ DASHBOARD DO PATRÃO ============
        function showBossDashboard() {
            document.getElementById('bossDashboard').style.display = 'block';
            document.getElementById('bossUserName').textContent = currentUser.name;
            
            // Atualizar menu ativo
            updateActiveMenu('boss');
            
            // Carregar dados
            loadBossData();
        }
        
        function loadBossData() {
            // Carregar equipas
            const teamsTable = document.getElementById('bossTeamsTable');
            teamsTable.innerHTML = '';
            
            MAFCSystem.teams.forEach(team => {
                const statusBadge = team.status === 'working' ? 
                    '<span class="badge badge-success">A Trabalhar</span>' :
                    '<span class="badge badge-warning">Parado</span>';
                
                const row = `
                    <tr>
                        <td><strong>${team.name}</strong></td>
                        <td>${team.location}</td>
                        <td>Saneamento Urbano</td>
                        <td>${statusBadge}</td>
                        <td>${team.gps.split(',')[0]}</td>
                    </tr>
                `;
                teamsTable.innerHTML += row;
            });
            
            // Carregar todas as equipas
            const allTeamsTable = document.getElementById('allTeamsTable');
            allTeamsTable.innerHTML = '';
            
            MAFCSystem.teams.forEach(team => {
                const row = `
                    <tr>
                        <td>#${team.id.toString().padStart(3, '0')}</td>
                        <td><strong>${team.name}</strong></td>
                        <td>${team.leader}</td>
                        <td>${team.location}</td>
                        <td>Saneamento Urbano</td>
                        <td>${team.workers} trabalhadores</td>
                        <td>
                            <button class="btn-dashboard btn-primary btn-sm" onclick="viewTeamDetails(${team.id})">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="btn-dashboard btn-warning btn-sm" onclick="editTeam(${team.id})">
                                <i class="fas fa-edit"></i>
                            </button>
                        </td>
                    </tr>
                `;
                allTeamsTable.innerHTML += row;
            });
        }
        
        // ============ DASHBOARD DO CHEFE DE EQUIPA ============
        function showTeamDashboard() {
            document.getElementById('teamDashboard').style.display = 'block';
            document.getElementById('teamUserName').textContent = currentUser.team || currentUser.name;
            
            // Atualizar menu ativo
            updateActiveMenu('team');
            
            // Carregar dados da equipa
            loadTeamData();
        }
        
        function loadTeamData() {
            // Encontrar dados da equipa
            const teamData = MAFCSystem.teams.find(t => t.name === currentUser.team);
            
            if (teamData) {
                // Atualizar contadores
                document.getElementById('teamWorkersCount').textContent = teamData.workers;
                document.getElementById('teamHoursToday').textContent = '4.5';
                document.getElementById('teamPendingMaterials').textContent = '3';
                document.getElementById('teamStatus').textContent = teamData.status === 'working' ? 'Online' : 'Offline';
                
                // Atualizar GPS
                document.getElementById('gpsLat').textContent = teamData.gps.split(',')[0];
                document.getElementById('gpsLng').textContent = teamData.gps.split(',')[1];
                
                // Carregar trabalhadores
                const workerSelect = document.getElementById('workerSelect');
                workerSelect.innerHTML = `
                    <option value="${currentUser.name}">${currentUser.name} (Chefe)</option>
                    <option value="Carlos Mendes">Carlos Mendes</option>
                    <option value="Miguel Santos">Miguel Santos</option>
                    <option value="António Oliveira">António Oliveira</option>
                    <option value="Pedro Costa">Pedro Costa</option>
                `;
            }
        }
        
        // ============ DASHBOARD DE COMPRAS ============
        function showPurchaseDashboard() {
            document.getElementById('purchaseDashboard').style.display = 'block';
            document.getElementById('purchaseUserName').textContent = currentUser.name;
            
            // Atualizar menu ativo
            updateActiveMenu('purchase');
            
            // Carregar dados
            loadPurchaseData();
        }
        
        function loadPurchaseData() {
            // Atualizar contadores
            document.getElementById('pendingCount').textContent = '12';
            document.getElementById('approvedCount').textContent = '24';
            document.getElementById('monthBudget').textContent = '18.5K';
            document.getElementById('suppliersCount').textContent = '8';
        }
        
        // ============ FUNÇÕES COMUNS ============
        function updateActiveMenu(dashboard) {
            // Remover active de todos os menus
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Adicionar active ao primeiro item
            document.querySelectorAll('.dashboard-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Ativar primeira seção
            if (dashboard === 'boss') {
                document.querySelector('#bossDashboard .menu-item').classList.add('active');
                document.getElementById('overviewSection').classList.add('active');
            } else if (dashboard === 'team') {
                document.querySelector('#teamDashboard .menu-item').classList.add('active');
                document.getElementById('teamOverviewSection').classList.add('active');
            } else if (dashboard === 'purchase') {
                document.querySelector('#purchaseDashboard .menu-item').classList.add('active');
                document.getElementById('purchaseOverviewSection').classList.add('active');
            }
        }
        
        // Navegação do menu
        document.querySelectorAll('.menu-item').forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                
                const dashboard = this.closest('.dashboard');
                const sectionId = this.getAttribute('data-section') + 'Section';
                
                // Remover active de todos os itens do mesmo dashboard
                dashboard.querySelectorAll('.menu-item').forEach(i => {
                    i.classList.remove('active');
                });
                
                // Adicionar active ao item clicado
                this.classList.add('active');
                
                // Esconder todas as seções do dashboard
                dashboard.querySelectorAll('.dashboard-section').forEach(section => {
                    section.classList.remove('active');
                });
                
                // Mostrar seção selecionada
                document.getElementById(sectionId).classList.add('active');
            });
        });
        
        // ============ FUNÇÕES DO CHEFE DE EQUIPA ============
        function registerTime() {
            const workerSelect = document.getElementById('workerSelect');
            const timeAction = document.getElementById('timeAction');
            const currentTime = document.getElementById('currentTimeInput');
            
            const worker = workerSelect.options[workerSelect.selectedIndex].text;
            const action = timeAction.value;
            const time = new Date().toLocaleTimeString('pt-PT', { hour: '2-digit', minute: '2-digit' });
            
            // Atualizar hora atual
            currentTime.value = time;
            
            if (action === 'start') {
                alert(`✅ Entrada registada para ${worker} às ${time}`);
            } else {
                alert(`✅ Saída registada para ${worker} às ${time}`);
            }
            
            // Simular atualização da tabela
            updateTimeRecords();
        }
        
        function registerAllTeam(action) {
            const time = new Date().toLocaleTimeString('pt-PT', { hour: '2-digit', minute: '2-digit' });
            
            if (action === 'start') {
                alert(`✅ Entrada registada para TODA A EQUIPA às ${time}`);
            } else {
                alert(`✅ Saída registada para TODA A EQUIPA às ${time}`);
            }
            
            updateTimeRecords();
        }
        
        function updateTimeRecords() {
            const table = document.getElementById('teamTimeRecords');
            const time = new Date().toLocaleTimeString('pt-PT', { hour: '2-digit', minute: '2-digit' });
            
            table.innerHTML = `
                <tr>
                    <td>João Silva (Chefe)</td>
                    <td>08:00</td>
                    <td>${time}</td>
                    <td>8.5h</td>
                    <td><span class="badge badge-warning">+0.5h</span></td>
                </tr>
                <tr>
                    <td>Carlos Mendes</td>
                    <td>08:00</td>
                    <td>${time}</td>
                    <td>8.5h</td>
                    <td><span class="badge badge-warning">+0.5h</span></td>
                </tr>
            `;
            
            // Atualizar horas hoje
            document.getElementById('teamHoursToday').textContent = '8.5';
        }
        
        function selectCategory(category) {
            document.querySelectorAll('.category-card').forEach(card => {
                card.style.borderColor = 'transparent';
            });
            
            event.currentTarget.style.borderColor = 'var(--team)';
            loadMaterialsByCategory(category);
        }
        
        function loadMaterialsByCategory(category) {
            const materials = MAFCSystem.materials[category] || [];
            const select = document.getElementById('materialSelect');
            
            select.innerHTML = '';
            materials.forEach(material => {
                const option = document.createElement('option');
                option.value = material.id;
                option.textContent = `${material.name} (${material.unit})`;
                select.appendChild(option);
            });
        }
        
        function submitMaterialRequest() {
            const category = document.getElementById('materialCategory').value;
            const materialSelect = document.getElementById('materialSelect');
            const material = materialSelect.options[materialSelect.selectedIndex].text;
            const quantity = document.getElementById('materialQuantity').value;
            const unit = document.getElementById('materialUnit').value;
            const urgency = document.getElementById('materialUrgency').value;
            const notes = document.getElementById('materialNotes').value;
            
            if (!material || !quantity) {
                alert('Por favor, selecione um material e quantidade!');
                return;
            }
            
            // Criar pedido
            const request = {
                id: Date.now(),
                team: currentUser.team,
                material: material.split(' (')[0],
                quantity: quantity,
                unit: unit,
                urgency: urgency,
                notes: notes,
                date: new Date().toLocaleDateString('pt-PT'),
                status: 'pending',
                requestedBy: currentUser.name
            };
            
            // Adicionar ao sistema (simulado)
            MAFCSystem.materialRequests.push(request);
            
            // Atualizar contador
            const pendingCount = document.getElementById('teamPendingMaterials');
            pendingCount.textContent = parseInt(pendingCount.textContent) + 1;
            
            // Adicionar à tabela
            const table = document.getElementById('teamMaterialRequests');
            const urgencyBadge = urgency === 'critical' ? 'badge-danger' : 
                                urgency === 'urgent' ? 'badge-warning' : 'badge-info';
            const urgencyText = urgency === 'critical' ? 'CRÍTICO' :
                               urgency === 'urgent' ? 'Urgente' : 'Normal';
            
            const row = `
                <tr>
                    <td>${material.split(' (')[0]}</td>
                    <td>${quantity} ${unit}</td>
                    <td>${request.date}</td>
                    <td><span class="badge ${urgencyBadge}">${urgencyText}</span></td>
                </tr>
            `;
            
            table.innerHTML = row + table.innerHTML;
            
            alert(`✅ Pedido enviado para o Departamento de Compras!\n\nMaterial: ${material}\nQuantidade: ${quantity} ${unit}\nUrgência: ${urgencyText}`);
            
            // Limpar formulário
            document.getElementById('materialQuantity').value = 1;
            document.getElementById('materialNotes').value = '';
        }
        
        function updateGPSLocation() {
            // Simular novas coordenadas GPS
            const lat = (52 + Math.random()).toFixed(4) + '° N';
            const lng = (13 + Math.random()).toFixed(4) + '° E';
            
            document.getElementById('gpsLat').textContent = lat;
            document.getElementById('gpsLng').textContent = lng;
            
            alert(`📍 Localização GPS atualizada!\n\nNova localização:\n${lat}, ${lng}\n\nO patrão pode ver em tempo real!`);
        }
        
        function sendLocationToBoss() {
            const lat = document.getElementById('gpsLat').textContent;
            const lng = document.getElementById('gpsLng').textContent;
            
            alert(`📡 Localização enviada ao Patrão!\n\nCoordenadas: ${lat}, ${lng}\n\nO patrão em Portugal pode ver exatamente onde a equipa está trabalhando na Alemanha.`);
        }
        
        // ============ FUNÇÕES DO PATRÃO ============
        function refreshLocations() {
            alert('📍 Localizações atualizadas em tempo real!\n\nTodas as 15 equipas na Alemanha foram localizadas.');
        }
        
        function viewAllRequests() {
            alert('📋 Mostrando todos os pedidos de material pendentes...');
        }
        
        function addNewTeam() {
            alert('👷 Adicionar nova equipa - Funcionalidade em desenvolvimento...');
        }
        
        function viewTeamDetails(teamId) {
            const team = MAFCSystem.teams.find(t => t.id === teamId);
            if (team) {
                alert(`🔍 Detalhes da Equipa:\n\nNome: ${team.name}\nChefe: ${team.leader}\nLocalização: ${team.location}\nTrabalhadores: ${team.workers}\nGPS: ${team.gps}\nEstado: ${team.status}`);
            }
        }
        
        function exportHours() {
            alert('📊 Exportando registos de horas para Excel...\n\nFicheiro gerado: horas_trabalhadas_mafc.xlsx');
        }
        
        function simulateClockIn() {
            const time = new Date().toLocaleTimeString('pt-PT');
            alert(`⏰ Simulação de entrada registada às ${time}\n\nO patrão em Portugal pode ver em tempo real as entradas na Alemanha.`);
        }
        
        function simulateClockOut() {
            const time = new Date().toLocaleTimeString('pt-PT');
            alert(`⏰ Simulação de saída registada às ${time}\n\nHoras calculadas automaticamente para banco de horas.`);
        }
        
        function exportToAccounting() {
            alert('💰 Exportando dados para contabilidade...\n\nBanco de horas (>160h/mês) exportado para ficheiro contabilístico.');
        }
        
        function approveRequest(requestId) {
            alert(`✅ Pedido #${requestId} aprovado pelo patrão!\n\nMaterial será comprado pelo departamento de compras.`);
        }
        
        // ============ FUNÇÕES DE COMPRAS ============
        function processAllUrgent() {
            alert('⚡ Processando todos os pedidos urgentes...\n\nPedidos críticos serão priorizados.');
        }
        
        function approvePurchase(requestId) {
            alert(`✅ Pedido #${requestId} aprovado!\n\nPor favor, insira os dados do fornecedor e encomenda.`);
            
            // Simular aprovação
            const supplier = prompt('Nome do fornecedor:');
            const orderNumber = prompt('Número da encomenda:');
            
            if (supplier && orderNumber) {
                alert(`📦 Encomenda criada!\n\nFornecedor: ${supplier}\nNº Encomenda: ${orderNumber}\n\nA equipa será notificada.`);
            }
        }
        
        function rejectPurchase(requestId) {
            const reason = prompt('Motivo da recusa:');
            if (reason) {
                alert(`❌ Pedido #${requestId} recusado!\n\nMotivo: ${reason}\n\nO chefe de equipa será notificado.`);
            }
        }
        
        function newPurchase() {
            alert('🛒 Criar nova compra manual...');
        }
        
        function approveAll() {
            if (confirm('Tem certeza que deseja aprovar TODOS os pedidos pendentes?')) {
                alert('✅ Todos os pedidos foram aprovados!\n\nSerão criadas encomendas automáticas.');
            }
        }
        
        function rejectAll() {
            if (confirm('Tem certeza que deseja recusar TODOS os pedidos pendentes?')) {
                alert('❌ Todos os pedidos foram recusados!\n\nOs chefes de equipa serão notificados.');
            }
        }
        
        function registerNewOrder() {
            alert('📝 Registar nova encomenda com fornecedor...');
        }
        
        // ============ FUNÇÕES GERAIS ============
        function initializeDashboard() {
            // Atualizar relógios em tempo real
            updateClocks();
            setInterval(updateClocks, 1000);
            
            // Carregar materiais para chefe de equipa
            if (currentUser.role === 'team') {
                loadMaterialsByCategory('construction');
            }
            
            // Simular dados iniciais
            if (MAFCSystem.materialRequests.length === 0) {
                // Adicionar alguns pedidos de exemplo
                MAFCSystem.materialRequests.push({
                    id: 1,
                    team: 'Equipa 03 - Munich',
                    material: 'Cimento',
                    quantity: 50,
                    unit: 'sacos',
                    urgency: 'critical',
                    date: '10/12/2024',
                    status: 'pending',
                    requestedBy: 'Miguel Santos'
                });
            }
        }
        
        function updateClocks() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('pt-PT');
            const dateString = now.toLocaleDateString('pt-PT', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            
            // Atualizar todos os relógios
            document.querySelectorAll('#bossCurrentTime, #teamCurrentTime, #purchaseCurrentTime').forEach(el => {
                el.textContent = timeString;
            });
            
            // Atualizar relógio completo do patrão
            const bossFullTime = document.getElementById('bossCurrentTimeFull');
            if (bossFullTime) {
                bossFullTime.textContent = timeString;
            }
            
            // Atualizar hora atual no chefe de equipa
            const currentTimeInput = document.getElementById('currentTimeInput');
            if (currentTimeInput) {
                currentTimeInput.value = now.toLocaleTimeString('pt-PT', { hour: '2-digit', minute: '2-digit' });
            }
        }
        
        // Logout
        document.querySelectorAll('.logout-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                if (confirm('Tem certeza que deseja sair do sistema?')) {
                    // Esconder todos os dashboards
                    document.querySelectorAll('.dashboard').forEach(d => {
                        d.style.display = 'none';
                    });
                    
                    // Mostrar website público
                    document.getElementById('publicWebsite').style.display = 'block';
                    
                    // Limpar formulário de login
                    document.getElementById('loginForm').reset();
                    currentUser = null;
                }
            });
        });
        
        // Inicializar sistema
        updateClocks();
        
        // Adicionar alguns dados de exemplo
        window.addEventListener('load', () => {
            // Simular alguns pedidos
            if (MAFCSystem.materialRequests.length === 0) {
                MAFCSystem.materialRequests = [
                    {
                        id: 1,
                        team: 'Equipa 01 - Berlin',
                        material: 'Cimento',
                        quantity: 100,
                        unit: 'sacos',
                        urgency: 'normal',
                        date: '09/12/2024',
                        status: 'approved',
                        requestedBy: 'João Silva'
                    },
                    {
                        id: 2,
                        team: 'Equipa 02 - Hamburg',
                        material: 'Alcatrão',
                        quantity: 2,
                        unit: 'ton',
                        urgency: 'urgent',
                        date: '10/12/2024',
                        status: 'pending',
                        requestedBy: 'Carlos Mendes'
                    }
                ];
            }
        });
    </script>
</body>
</html>
