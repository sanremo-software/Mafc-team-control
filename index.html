<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAFC & FILHO, LDA. - Sistema de Gestão</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #1a5f7a;
            --secondary: #2d9cdb;
            --accent: #ff9f1c;
            --dark: #003049;
            --light: #f8f9fa;
            --success: #27ae60;
            --warning: #f39c12;
            --danger: #e74c3c;
            --construction: #e67e22;
            --boss: #8e44ad;
            --team: #3498db;
            --purchase: #2ecc71;
            --office: #9b59b6;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--light);
            overflow-x: hidden;
        }

        /* ============ PÁGINA PÚBLICA ============ */
        #publicWebsite {
            min-height: 100vh;
        }

        .public-header {
            background: linear-gradient(135deg, var(--dark), var(--primary));
            color: white;
            padding: 1.5rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }

        .container {
            width: 90%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo i {
            font-size: 2.8rem;
            color: var(--accent);
        }

        .logo-text h1 {
            font-size: 1.8rem;
            font-weight: 800;
        }

        .logo-text span {
            color: var(--accent);
            font-size: 1rem;
            display: block;
            margin-top: 5px;
        }

        .cta-buttons {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .btn {
            padding: 12px 30px;
            border-radius: 50px;
            font-weight: 600;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            white-space: nowrap;
        }

        .btn-whatsapp {
            background: #25D366;
            color: white;
        }

        .btn-whatsapp:hover {
            background: #1da851;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(37, 211, 102, 0.4);
        }

        .btn-email {
            background: var(--accent);
            color: var(--dark);
        }

        .btn-email:hover {
            background: #ffb143;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 159, 28, 0.3);
        }

        .btn-login {
            background: var(--primary);
            color: white;
        }

        .btn-login:hover {
            background: var(--dark);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(26, 95, 122, 0.3);
        }

        .hero {
            background: linear-gradient(rgba(0, 48, 73, 0.88), rgba(0, 48, 73, 0.92));
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: white;
            padding: 180px 0 120px;
            text-align: center;
            margin-top: 80px;
        }

        .hero h2 {
            font-size: 3.8rem;
            margin-bottom: 25px;
            font-weight: 900;
            text-transform: uppercase;
            line-height: 1.2;
        }

        .hero p {
            font-size: 1.4rem;
            max-width: 850px;
            margin: 0 auto 50px;
            opacity: 0.95;
            line-height: 1.8;
        }

        .hero-buttons {
            display: flex;
            gap: 25px;
            justify-content: center;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        .services {
            padding: 100px 0;
            background: white;
        }

        .section-title {
            text-align: center;
            font-size: 2.8rem;
            color: var(--dark);
            margin-bottom: 70px;
            position: relative;
            font-weight: 800;
        }

        .section-title:after {
            content: '';
            position: absolute;
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 5px;
            background: var(--accent);
            border-radius: 10px;
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 35px;
            margin-top: 60px;
        }

        .service-card {
            background: var(--light);
            padding: 45px 35px;
            border-radius: 15px;
            text-align: center;
            transition: all 0.4s;
            border: 3px solid transparent;
        }

        .service-card:hover {
            transform: translateY(-15px);
            border-color: var(--accent);
            box-shadow: 0 20px 40px rgba(0,0,0,0.12);
        }

        .service-icon {
            font-size: 3.5rem;
            color: var(--primary);
            margin-bottom: 25px;
        }

        .service-card h3 {
            font-size: 1.7rem;
            margin-bottom: 20px;
            color: var(--dark);
            font-weight: 700;
        }

        .company-info {
            padding: 100px 0;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 40px;
            margin-top: 60px;
        }

        .stat-card {
            background: white;
            padding: 40px 30px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            border-top: 6px solid var(--accent);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-10px);
        }

        .stat-card i {
            font-size: 3.5rem;
            color: var(--primary);
            margin-bottom: 20px;
        }

        .stat-card h3 {
            font-size: 3.2rem;
            color: var(--dark);
            margin-bottom: 10px;
            font-weight: 800;
        }

        .quote-request {
            background: linear-gradient(135deg, var(--dark), var(--primary));
            color: white;
            padding: 100px 0;
            text-align: center;
        }

        .quote-request h2 {
            font-size: 2.8rem;
            margin-bottom: 25px;
            font-weight: 800;
        }

        .quote-buttons {
            display: flex;
            gap: 25px;
            justify-content: center;
            margin-top: 50px;
            flex-wrap: wrap;
        }

        .public-footer {
            background: var(--dark);
            color: white;
            padding: 80px 0 40px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 50px;
            margin-bottom: 50px;
        }

        .copyright {
            text-align: center;
            padding-top: 40px;
            border-top: 1px solid rgba(255,255,255,0.15);
            color: rgba(255,255,255,0.7);
            font-size: 0.95rem;
        }

        /* ============ MODAL LOGIN ============ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            width: 90%;
            max-width: 500px;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--dark), var(--primary));
            color: white;
            padding: 25px;
            text-align: center;
            position: relative;
        }

        .modal-header h2 {
            font-size: 2rem;
            font-weight: 700;
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 25px;
            font-size: 1.8rem;
            cursor: pointer;
            color: white;
            transition: color 0.3s;
        }

        .close-modal:hover {
            color: var(--accent);
        }

        .modal-body {
            padding: 50px;
        }

        .form-group {
            margin-bottom: 30px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            color: var(--dark);
            font-weight: 600;
            font-size: 1.1rem;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1.1rem;
            transition: all 0.3s;
            background: #f8f9fa;
        }

        .form-group input:focus, .form-group select:focus {
            border-color: var(--primary);
            outline: none;
            background: white;
            box-shadow: 0 0 0 3px rgba(26, 95, 122, 0.1);
        }

        .login-submit {
            background: linear-gradient(135deg, var(--primary), var(--dark));
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .login-submit:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(26, 95, 122, 0.3);
            background: linear-gradient(135deg, var(--dark), var(--primary));
        }

        /* ============ DASHBOARDS ============ */
        .dashboard {
            display: none;
            min-height: 100vh;
            background: #f0f2f5;
        }

        .top-bar {
            background: white;
            padding: 0;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            border-bottom: 5px solid;
        }

        .boss-dashboard .top-bar {
            border-bottom-color: var(--boss);
            background: linear-gradient(135deg, #9b59b6, var(--boss));
        }

        .team-dashboard .top-bar {
            border-bottom-color: var(--team);
            background: linear-gradient(135deg, #3498db, #2980b9);
        }

        .purchase-dashboard .top-bar {
            border-bottom-color: var(--purchase);
            background: linear-gradient(135deg, #2ecc71, #27ae60);
        }

        .office-dashboard .top-bar {
            border-bottom-color: var(--office);
            background: linear-gradient(135deg, var(--office), #8e44ad);
        }

        .top-bar-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .dashboard-brand {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .dashboard-brand i {
            font-size: 2.2rem;
            color: white;
        }

        .dashboard-brand h1 {
            color: white;
            font-size: 1.8rem;
            font-weight: 700;
        }

        .dashboard-info {
            display: flex;
            align-items: center;
            gap: 25px;
            color: white;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
            background: rgba(255,255,255,0.15);
            padding: 10px 20px;
            border-radius: 50px;
            backdrop-filter: blur(10px);
        }

        .user-info i {
            font-size: 1.4rem;
        }

        .logout-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            padding: 10px 25px;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
            backdrop-filter: blur(10px);
        }

        .logout-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
            border-color: white;
        }

        .horizontal-menu {
            background: white;
            margin-top: 70px;
            padding: 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            position: fixed;
            width: 100%;
            z-index: 999;
            overflow-x: auto;
        }

        .menu-container {
            display: flex;
            gap: 5px;
            padding: 0;
            width: 100%;
        }

        .menu-item {
            padding: 20px 30px;
            color: #555;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 15px;
            font-weight: 600;
            white-space: nowrap;
            border-bottom: 4px solid transparent;
            transition: all 0.3s;
        }

        .menu-item:hover {
            color: var(--primary);
            background: #f8f9fa;
        }

        .menu-item.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
            background: #f0f7ff;
        }

        .menu-item i {
            font-size: 1.2rem;
        }

        .menu-badge {
            background: var(--accent);
            color: white;
            font-size: 0.75rem;
            padding: 3px 8px;
            border-radius: 20px;
            margin-left: 8px;
            font-weight: 700;
        }

        .dashboard-content {
            margin-top: 140px;
            padding: 20px 30px;
            background: #f0f2f5;
            min-height: calc(100vh - 140px);
        }

        .dashboard-section {
            display: none;
        }

        .dashboard-section.active {
            display: block;
        }

        .stats-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .stat-card-horizontal {
            background: white;
            padding: 25px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            gap: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
            border-left: 6px solid;
            transition: transform 0.3s;
        }

        .stat-card-horizontal:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.12);
        }

        .boss-dashboard .stat-card-horizontal { border-left-color: var(--boss); }
        .team-dashboard .stat-card-horizontal { border-left-color: var(--team); }
        .purchase-dashboard .stat-card-horizontal { border-left-color: var(--purchase); }
        .office-dashboard .stat-card-horizontal { border-left-color: var(--office); }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: white;
        }

        .boss-dashboard .stat-icon { background: linear-gradient(135deg, var(--boss), #9b59b6); }
        .team-dashboard .stat-icon { background: linear-gradient(135deg, var(--team), #3498db); }
        .purchase-dashboard .stat-icon { background: linear-gradient(135deg, var(--purchase), #2ecc71); }
        .office-dashboard .stat-icon { background: linear-gradient(135deg, var(--office), #8e44ad); }

        .stat-info h3 {
            font-size: 2.2rem;
            color: var(--dark);
            margin-bottom: 5px;
            font-weight: 800;
        }

        .stat-info p {
            color: #666;
            font-weight: 600;
            font-size: 1rem;
        }

        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .content-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
            transition: transform 0.3s;
        }

        .content-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.12);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .card-header h3 {
            color: var(--dark);
            font-size: 1.4rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .btn-dashboard {
            padding: 12px 25px;
            border-radius: 10px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            font-size: 1rem;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--dark);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(26, 95, 122, 0.3);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #219653;
            transform: translateY(-3px);
        }

        .btn-warning {
            background: var(--warning);
            color: white;
        }

        .btn-warning:hover {
            background: #e67e22;
            transform: translateY(-3px);
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-danger:hover {
            background: #c0392b;
            transform: translateY(-3px);
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 0.85rem;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .data-table th {
            background: var(--primary);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            font-size: 1rem;
        }

        .data-table td {
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
        }

        .data-table tr:hover {
            background: #f8f9fa;
        }

        .badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            display: inline-block;
        }

        .badge-success { background: #d5f4e6; color: var(--success); }
        .badge-warning { background: #fff3cd; color: var(--warning); }
        .badge-danger { background: #f8d7da; color: var(--danger); }
        .badge-primary { background: #d1ecf1; color: var(--secondary); }
        .badge-info { background: #d1ecf1; color: #17a2b8; }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group-dashboard {
            margin-bottom: 20px;
        }

        .form-group-dashboard label {
            display: block;
            margin-bottom: 8px;
            color: var(--dark);
            font-weight: 600;
            font-size: 1rem;
        }

        .form-group-dashboard input,
        .form-group-dashboard select,
        .form-group-dashboard textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s;
            background: #f8f9fa;
        }

        .form-group-dashboard input:focus,
        .form-group-dashboard select:focus,
        .form-group-dashboard textarea:focus {
            border-color: var(--primary);
            outline: none;
            background: white;
            box-shadow: 0 0 0 3px rgba(26, 95, 122, 0.1);
        }

        .form-actions {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #f0f0f0;
        }

        .time-tracker {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
        }

        .time-display {
            font-size: 3.5rem;
            font-weight: 800;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .time-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .category-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
        }

        .category-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .category-card i {
            font-size: 2.2rem;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .gps-tracker {
            background: linear-gradient(135deg, #11998e, #38ef7d);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
        }

        .gps-info {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .gps-coordinates {
            font-family: monospace;
            font-size: 1.2rem;
            background: rgba(255,255,255,0.15);
            padding: 12px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .monthly-report {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }

        .report-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #eee;
        }

        .report-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 20px;
        }

        .time-sheet-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .time-sheet-table th {
            background: #f8f9fa;
            padding: 12px;
            text-align: left;
            border-bottom: 2px solid #ddd;
        }

        .time-sheet-table td {
            padding: 12px;
            border-bottom: 1px solid #eee;
        }

        /* Responsividade */
        @media (max-width: 1200px) {
            .content-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .hero h2 {
                font-size: 2.2rem;
            }
            
            .section-title {
                font-size: 2.3rem;
            }
            
            .menu-container {
                overflow-x: auto;
                padding-bottom: 10px;
            }
            
            .menu-item {
                padding: 15px 20px;
                font-size: 0.95rem;
            }
            
            .dashboard-content {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <!-- ============ PÁGINA PÚBLICA ============ -->
    <div id="publicWebsite">
        <header class="public-header">
            <div class="container nav-container">
                <div class="logo">
                    <i class="fas fa-hard-hat"></i>
                    <div class="logo-text">
                        <h1>MAFC & FILHO, LDA.</h1>
                        <span>Construção Civil & Obras Públicas | Desde 2001</span>
                    </div>
                </div>
                <div class="cta-buttons">
                    <a href="https://wa.me/351123456789" class="btn btn-whatsapp" target="_blank">
                        <i class="fab fa-whatsapp"></i> WhatsApp
                    </a>
                    <a href="mailto:orcamentos@mafc-filho.pt" class="btn btn-email">
                        <i class="fas fa-envelope"></i> Pedir Orçamento
                    </a>
                    <a href="#" class="btn btn-login" id="openLogin">
                        <i class="fas fa-sign-in-alt"></i> Acesso Sistema
                    </a>
                </div>
            </div>
        </header>

        <section class="hero">
            <div class="container">
                <h2>Especialistas em Construção Civil e Obras Públicas</h2>
                <p>Mais de 20 anos de experiência em saneamento, abastecimento de água, redes de fibra óptica, pavimentação e infraestruturas.</p>
                <div class="hero-buttons">
                    <a href="#services" class="btn btn-email">
                        <i class="fas fa-hard-hat"></i> Nossos Serviços
                    </a>
                    <a href="#quote" class="btn btn-whatsapp">
                        <i class="fas fa-calculator"></i> Orçamento Grátis
                    </a>
                </div>
            </div>
        </section>

        <section class="services" id="services">
            <div class="container">
                <h2 class="section-title">Serviços Especializados</h2>
                <div class="services-grid">
                    <div class="service-card">
                        <div class="service-icon"><i class="fas fa-water"></i></div>
                        <h3>Saneamento e Águas</h3>
                        <p>Redes de águas pluviais e abastecimento de água potável.</p>
                    </div>
                    <div class="service-card">
                        <div class="service-icon"><i class="fas fa-satellite-dish"></i></div>
                        <h3>Redes de Fibra Óptica</h3>
                        <p>Instalação e manutenção de telecomunicações.</p>
                    </div>
                    <div class="service-card">
                        <div class="service-icon"><i class="fas fa-road"></i></div>
                        <h3>Pavimentação</h3>
                        <p>Pavimentação em cubo, betuminosa e reabilitação de vias.</p>
                    </div>
                    <div class="service-card">
                        <div class="service-icon"><i class="fas fa-bolt"></i></div>
                        <h3>Redes EDP e Gás</h3>
                        <p>Instalação de infraestruturas elétricas e de gás natural.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="company-info">
            <div class="container">
                <h2 class="section-title">MAFC em Números</h2>
                <div class="stats-grid">
                    <div class="stat-card"><i class="fas fa-calendar-alt"></i><h3>20+</h3><p>Anos de Experiência</p></div>
                    <div class="stat-card"><i class="fas fa-users"></i><h3>40+</h3><p>Colaboradores</p></div>
                    <div class="stat-card"><i class="fas fa-hard-hat"></i><h3>15</h3><p>Equipas Ativas</p></div>
                    <div class="stat-card"><i class="fas fa-globe-europe"></i><h3>2</h3><p>Países de Operação</p></div>
                </div>
            </div>
        </section>

        <section class="quote-request" id="quote">
            <div class="container">
                <h2>Solicite um Orçamento Gratuito</h2>
                <p>Tem um projeto de construção? Entre em contacto connosco.</p>
                <div class="quote-buttons">
                    <a href="https://wa.me/351123456789" class="btn btn-whatsapp" target="_blank">
                        <i class="fab fa-whatsapp"></i> WhatsApp
                    </a>
                    <a href="mailto:orcamentos@mafc-filho.pt" class="btn btn-email">
                        <i class="fas fa-envelope"></i> Email
                    </a>
                </div>
            </div>
        </section>

        <footer class="public-footer">
            <div class="container">
                <div class="footer-content">
                    <div>
                        <h3>MAFC & FILHO, LDA.</h3>
                        <p>Constituída em 2001, especialistas em construção civil e obras públicas.</p>
                    </div>
                </div>
                <div class="copyright">
                    <p>&copy; 2001-2024 MAFC & FILHO, LDA. - Todos os direitos reservados.</p>
                </div>
            </div>
        </footer>
    </div>

    <!-- ============ MODAL DE LOGIN ============ -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-lock"></i> Acesso ao Sistema MAFC</h2>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="loginForm">
                    <div class="form-group">
                        <label for="username"><i class="fas fa-user"></i> Código de Acesso</label>
                        <input type="text" id="username" placeholder="Digite seu código" required>
                    </div>
                    <div class="form-group">
                        <label for="password"><i class="fas fa-key"></i> Senha</label>
                        <input type="password" id="password" placeholder="Digite sua senha" required>
                    </div>
                    <div class="form-group">
                        <label for="role"><i class="fas fa-user-tag"></i> Tipo de Acesso</label>
                        <select id="role" required>
                            <option value="">Selecione o tipo de acesso</option>
                            <option value="boss">Patrão/Administrador</option>
                            <option value="team">Chefe de Equipa</option>
                            <option value="purchase">Responsável de Compras</option>
                            <option value="office">Empregado de Escritório</option>
                        </select>
                    </div>
                    <button type="submit" class="login-submit">
                        <i class="fas fa-sign-in-alt"></i> Entrar no Sistema
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- ============ DASHBOARD DO PATRÃO ============ -->
    <div class="dashboard boss-dashboard" id="bossDashboard">
        <div class="top-bar">
            <div class="container top-bar-content">
                <div class="dashboard-brand">
                    <i class="fas fa-crown"></i>
                    <h1>Painel do Patrão - MAFC Team Control</h1>
                </div>
                <div class="dashboard-info">
                    <div class="user-info">
                        <i class="fas fa-user-circle"></i>
                        <span id="bossUserName">Administrador MAFC</span>
                    </div>
                    <div id="bossCurrentTime">10:45 AM</div>
                    <button class="logout-btn" id="bossLogoutBtn">
                        <i class="fas fa-sign-out-alt"></i> Sair
                    </button>
                </div>
            </div>
        </div>

        <nav class="horizontal-menu">
            <div class="container menu-container">
                <a href="#" class="menu-item active" data-section="overview">
                    <i class="fas fa-tachometer-alt"></i> Visão Geral
                </a>
                <a href="#" class="menu-item" data-section="teams">
                    <i class="fas fa-users"></i> 15 Equipas
                    <span class="menu-badge">15</span>
                </a>
                <a href="#" class="menu-item" data-section="works">
                    <i class="fas fa-hard-hat"></i> Obras Alemanha
                    <span class="menu-badge">8</span>
                </a>
                <a href="#" class="menu-item" data-section="hours">
                    <i class="fas fa-clock"></i> Controlo de Horas
                    <span class="menu-badge">42</span>
                </a>
                <a href="#" class="menu-item" data-section="materials">
                    <i class="fas fa-boxes"></i> Pedidos Material
                    <span class="menu-badge">12</span>
                </a>
                <a href="#" class="menu-item" data-section="purchases">
                    <i class="fas fa-shopping-cart"></i> Compras
                    <span class="menu-badge">24</span>
                </a>
                <a href="#" class="menu-item" data-section="expenses">
                    <i class="fas fa-euro-sign"></i> Despesas
                </a>
                <a href="#" class="menu-item" data-section="reports">
                    <i class="fas fa-chart-bar"></i> Relatórios
                </a>
                <a href="#" class="menu-item" data-section="accounting">
                    <i class="fas fa-file-invoice-dollar"></i> Contabilidade
                </a>
            </div>
        </nav>

        <div class="dashboard-content">
            <div class="dashboard-section active" id="overviewSection">
                <div class="stats-row">
                    <div class="stat-card-horizontal">
                        <div class="stat-icon"><i class="fas fa-users"></i></div>
                        <div class="stat-info"><h3>15</h3><p>Equipas Ativas</p></div>
                    </div>
                    <div class="stat-card-horizontal">
                        <div class="stat-icon"><i class="fas fa-hard-hat"></i></div>
                        <div class="stat-info"><h3>42</h3><p>Trabalhadores</p></div>
                    </div>
                    <div class="stat-card-horizontal">
                        <div class="stat-icon"><i class="fas fa-euro-sign"></i></div>
                        <div class="stat-info"><h3>8</h3><p>Obras Alemanha</p></div>
                    </div>
                    <div class="stat-card-horizontal">
                        <div class="stat-icon"><i class="fas fa-clock"></i></div>
                        <div class="stat-info"><h3>12</h3><p>Pedidos Pendentes</p></div>
                    </div>
                </div>

                <div class="content-grid">
                    <div class="content-card">
                        <div class="card-header">
                            <h3><i class="fas fa-map-marker-alt"></i> Equipas em Tempo Real - Alemanha</h3>
                            <button class="btn-dashboard btn-primary" onclick="refreshLocations()">
                                <i class="fas fa-sync-alt"></i> Atualizar
                            </button>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Equipa</th>
                                    <th>Localização</th>
                                    <th>Obra</th>
                                    <th>Estado</th>
                                    <th>GPS</th>
                                </tr>
                            </thead>
                            <tbody id="bossTeamsTable"></tbody>
                        </table>
                    </div>

                    <div class="content-card">
                        <div class="card-header">
                            <h3><i class="fas fa-exclamation-circle"></i> Pedidos Urgentes</h3>
                            <button class="btn-dashboard btn-warning" onclick="viewAllRequests()">
                                <i class="fas fa-eye"></i> Ver Todos
                            </button>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Equipa</th>
                                    <th>Material</th>
                                    <th>Quantidade</th>
                                    <th>Urgência</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="urgentRequestsTable"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="dashboard-section" id="teamsSection">
                <div class="content-card">
                    <div class="card-header">
                        <h3><i class="fas fa-users"></i> Gestão das 15 Equipas</h3>
                        <button class="btn-dashboard btn-primary" onclick="addNewTeam()">
                            <i class="fas fa-plus"></i> Nova Equipa
                        </button>
                    </div>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Equipa</th>
                                <th>Chefe</th>
                                <th>Localização</th>
                                <th>Obra</th>
                                <th>Trabalhadores</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="allTeamsTable"></tbody>
                    </table>
                </div>
            </div>

            <div class="dashboard-section" id="hoursSection">
                <div class="content-card">
                    <div class="card-header">
                        <h3><i class="fas fa-clock"></i> Controlo de Horas - Todas as Equipas</h3>
                        <button class="btn-dashboard btn-success" onclick="exportHours()">
                            <i class="fas fa-file-export"></i> Exportar
                        </button>
                    </div>
                    
                    <div class="time-tracker">
                        <div class="time-display" id="bossCurrentTimeFull">10:45:23</div>
                        <div class="time-buttons">
                            <button class="btn-dashboard btn-warning" onclick="simulateClockIn()">
                                <i class="fas fa-sign-in-alt"></i> Simular Entrada
                            </button>
                            <button class="btn-dashboard btn-danger" onclick="simulateClockOut()">
                                <i class="fas fa-sign-out-alt"></i> Simular Saída
                            </button>
                        </div>
                    </div>

                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Trabalhador</th>
                                <th>Equipa</th>
                                <th>Entrada</th>
                                <th>Saída</th>
                                <th>Total</th>
                                <th>Banco Horas</th>
                            </tr>
                        </thead>
                        <tbody id="hoursTable"></tbody>
                    </table>
                </div>
            </div>

            <div class="dashboard-section" id="accountingSection">
                <div class="content-card">
                    <div class="card-header">
                        <h3><i class="fas fa-file-invoice-dollar"></i> Contabilidade - Banco de Horas (>160h)</h3>
                        <button class="btn-dashboard btn-success" onclick="exportToAccounting()">
                            <i class="fas fa-file-excel"></i> Exportar Excel
                        </button>
                    </div>

                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Trabalhador</th>
                                <th>Equipa</th>
                                <th>Horas Normais</th>
                                <th>Horas Extra</th>
                                <th>Total</th>
                                <th>Banco Horas</th>
                                <th>Valor</th>
                            </tr>
                        </thead>
                        <tbody id="accountingTable"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- ============ DASHBOARD DO CHEFE DE EQUIPA ============ -->
    <div class="dashboard team-dashboard" id="teamDashboard">
        <div class="top-bar">
            <div class="container top-bar-content">
                <div class="dashboard-brand">
                    <i class="fas fa-hard-hat"></i>
                    <h1>Chefe de Equipa - MAFC Team Control</h1>
                </div>
                <div class="dashboard-info">
                    <div class="user-info">
                        <i class="fas fa-user-hard-hat"></i>
                        <span id="teamUserName">Equipa 01 - Berlin</span>
                    </div>
                    <div id="teamCurrentTime">10:45 AM</div>
                    <button class="logout-btn" id="teamLogoutBtn">
                        <i class="fas fa-sign-out-alt"></i> Sair
                    </button>
                </div>
            </div>
        </div>

        <nav class="horizontal-menu">
            <div class="container menu-container">
                <a href="#" class="menu-item active" data-section="teamOverview">
                    <i class="fas fa-home"></i> Visão da Equipa
                </a>
                <a href="#" class="menu-item" data-section="teamTime">
                    <i class="fas fa-clock"></i> Controlo de Horas
                </a>
                <a href="#" class="menu-item" data-section="teamMaterials">
                    <i class="fas fa-boxes"></i> Pedir Materiais
                </a>
                <a href="#" class="menu-item" data-section="teamEmployees">
                    <i class="fas fa-user-plus"></i> Gestão Empregados
                </a>
                <a href="#" class="menu-item" data-section="teamReports">
                    <i class="fas fa-file-alt"></i> Extrato Mensal
                </a>
                <a href="#" class="menu-item" data-section="teamLocation">
                    <i class="fas fa-map-marker-alt"></i> Localização
                </a>
            </div>
        </nav>

        <div class="dashboard-content">
            <div class="dashboard-section active" id="teamOverviewSection">
                <div class="stats-row">
                    <div class="stat-card-horizontal">
                        <div class="stat-icon"><i class="fas fa-users"></i></div>
                        <div class="stat-info"><h3 id="teamWorkersCount">5</h3><p>Trabalhadores</p></div>
                    </div>
                    <div class="stat-card-horizontal">
                        <div class="stat-icon"><i class="fas fa-clock"></i></div>
                        <div class="stat-info"><h3 id="teamHoursToday">4.5</h3><p>Horas Hoje</p></div>
                    </div>
                    <div class="stat-card-horizontal">
                        <div class="stat-icon"><i class="fas fa-box"></i></div>
                        <div class="stat-info"><h3 id="teamPendingMaterials">3</h3><p>Pedidos Pendentes</p></div>
                    </div>
                    <div class="stat-card-horizontal">
                        <div class="stat-icon"><i class="fas fa-check-circle"></i></div>
                        <div class="stat-info"><h3 id="teamStatus">Online</h3><p>Estado</p></div>
                    </div>
                </div>

                <div class="content-grid">
                    <div class="content-card">
                        <div class="card-header">
                            <h3><i class="fas fa-clock"></i> Registos de Hoje</h3>
                            <button class="btn-dashboard btn-primary" onclick="registerAllEntry()">
                                <i class="fas fa-users"></i> Entrada Todos
                            </button>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Trabalhador</th>
                                    <th>Entrada</th>
                                    <th>Saída</th>
                                    <th>Total</th>
                                    <th>WhatsApp</th>
                                </tr>
                            </thead>
                            <tbody id="teamTimeRecords"></tbody>
                        </table>
                    </div>

                    <div class="content-card">
                        <div class="card-header">
                            <h3><i class="fas fa-box"></i> Pedidos Recentes</h3>
                            <button class="btn-dashboard btn-success" onclick="showMaterialRequestForm()">
                                <i class="fas fa-plus"></i> Novo Pedido
                            </button>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Material</th>
                                    <th>Quantidade</th>
                                    <th>Data</th>
                                    <th>Estado</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="teamMaterialRequests"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="dashboard-section" id="teamTimeSection">
                <div class="content-card">
                    <div class="card-header">
                        <h3><i class="fas fa-clock"></i> Controlo de Horas Individual</h3>
                        <div class="time-display" style="font-size: 2.5rem; color: var(--team);" id="teamClock">
                            08:45:23
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group-dashboard">
                            <label>Trabalhador</label>
                            <select id="workerSelect" onchange="loadWorkerWhatsApp()">
                                <option value="">Selecione um trabalhador</option>
                            </select>
                        </div>
                        <div class="form-group-dashboard">
                            <label>WhatsApp</label>
                            <input type="text" id="workerWhatsApp" readonly>
                        </div>
                        <div class="form-group-dashboard">
                            <label>Ação</label>
                            <select id="timeAction">
                                <option value="start">Entrada (Stempel)</option>
                                <option value="end">Saída (Ausstempel)</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button class="btn-dashboard btn-success" onclick="registerIndividualTime()">
                            <i class="fas fa-check"></i> Registar Hora
                        </button>
                        <button class="btn-dashboard btn-primary" onclick="sendWhatsAppReminder()">
                            <i class="fab fa-whatsapp"></i> Lembrar por WhatsApp
                        </button>
                        <button class="btn-dashboard btn-warning" onclick="registerAllTeam('start')">
                            <i class="fas fa-users"></i> Entrada Toda Equipa
                        </button>
                    </div>

                    <h3 style="margin-top: 30px; margin-bottom: 15px;"><i class="fas fa-history"></i> Histórico do Dia</h3>
                    <table class="data-table" id="dailyTimeRecords">
                        <thead>
                            <tr>
                                <th>Empregado</th>
                                <th>Entrada</th>
                                <th>Saída</th>
                                <th>Horas</th>
                                <th>Extra</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <div class="dashboard-section" id="teamEmployeesSection">
                <div class="content-card">
                    <div class="card-header">
                        <h3><i class="fas fa-user-plus"></i> Gestão de Empregados da Equipa</h3>
                        <button class="btn-dashboard btn-success" onclick="openEmployeeModal()">
                            <i class="fas fa-plus"></i> Adicionar Empregado
                        </button>
                    </div>
                    
                    <div class="form-row">
                        <input type="text" id="searchEmployee" placeholder="Pesquisar empregado...">
                        <select id="filterEmployeeStatus">
                            <option value="all">Todos os estados</option>
                            <option value="active">Ativos</option>
                            <option value="inactive">Inativos</option>
                        </select>
                    </div>

                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>WhatsApp</th>
                                <th>Cargo</th>
                                <th>Salário</th>
                                <th>Estado</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="teamEmployeesTable"></tbody>
                    </table>
                </div>
            </div>

            <div class="dashboard-section" id="teamReportsSection">
                <div class="content-card">
                    <div class="card-header">
                        <h3><i class="fas fa-file-invoice"></i> Extrato Mensal de Horas</h3>
                        <button class="btn-dashboard btn-primary" onclick="generateMonthlyReport()">
                            <i class="fas fa-chart-bar"></i> Gerar Relatório
                        </button>
                    </div>

                    <div class="form-row">
                        <div class="form-group-dashboard">
                            <label>Mês/Ano</label>
                            <select id="teamReportMonth">
                                <option value="12-2024">Dezembro 2024</option>
                                <option value="11-2024">Novembro 2024</option>
                            </select>
                        </div>
                        <div class="form-group-dashboard">
                            <label>Empregado</label>
                            <select id="teamReportEmployee">
                                <option value="all">Todos os Empregados</option>
                            </select>
                        </div>
                    </div>

                    <div class="monthly-report">
                        <div class="report-header">
                            <h4 id="teamReportTitle">Selecione mês e empregado</h4>
                            <span class="badge badge-info" id="teamTotalHours">-- horas</span>
                        </div>
                        
                        <table class="time-sheet-table" id="teamTimeSheetTable">
                            <thead>
                                <tr>
                                    <th>Data</th>
                                    <th>Empregado</th>
                                    <th>Horas</th>
                                    <th>Extra</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody id="teamTimeSheetBody"></tbody>
                        </table>
                        
                        <div class="report-actions">
                            <button class="btn-dashboard btn-primary" onclick="openMonthlyReportModal()">
                                <i class="fas fa-expand"></i> Ver Extrato Completo
                            </button>
                            <button class="btn-dashboard btn-success" onclick="printTeamReport()">
                                <i class="fas fa-print"></i> Imprimir
                            </button>
                            <button class="btn-dashboard btn-whatsapp" onclick="sendTeamReportWhatsApp()">
                                <i class="fab fa-whatsapp"></i> WhatsApp
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="dashboard-section" id="teamMaterialsSection">
                <div class="content-card">
                    <div class="card-header">
                        <h3><i class="fas fa-boxes"></i> Pedido de Material para Obra</h3>
                        <span class="badge badge-info">Envia automaticamente para Compras</span>
                    </div>

                    <div class="categories-grid">
                        <div class="category-card" onclick="selectCategory('construction')">
                            <i class="fas fa-brick"></i>
                            <h4>Materiais Construção</h4>
                        </div>
                        <div class="category-card" onclick="selectCategory('machines')">
                            <i class="fas fa-tractor"></i>
                            <h4>Máquinas</h4>
                        </div>
                        <div class="category-card" onclick="selectCategory('tools')">
                            <i class="fas fa-tools"></i>
                            <h4>Ferramentas</h4>
                        </div>
                        <div class="category-card" onclick="selectCategory('consumables')">
                            <i class="fas fa-gas-pump"></i>
                            <h4>Consumíveis</h4>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group-dashboard">
                            <label>Categoria</label>
                            <select id="materialCategory" onchange="loadMaterials()">
                                <option value="construction">Materiais de Construção</option>
                                <option value="machines">Máquinas e Equipamentos</option>
                                <option value="tools">Ferramentas</option>
                                <option value="consumables">Consumíveis</option>
                            </select>
                        </div>
                        <div class="form-group-dashboard">
                            <label>Material</label>
                            <select id="materialSelect">
                                <option value="">Selecione um material</option>
                            </select>
                        </div>
                        <div class="form-group-dashboard">
                            <label>Quantidade</label>
                            <input type="number" id="materialQuantity" min="1" value="1">
                        </div>
                    </div>

                    <div class="form-actions">
                        <button class="btn-dashboard btn-success" onclick="submitMaterialRequest()">
                            <i class="fas fa-paper-plane"></i> Enviar para Compras
                        </button>
                        <button class="btn-dashboard btn-whatsapp" onclick="submitMaterialRequestWhatsApp()">
                            <i class="fab fa-whatsapp"></i> WhatsApp Compras
                        </button>
                    </div>
                </div>
            </div>

            <div class="dashboard-section" id="teamLocationSection">
                <div class="content-card">
                    <div class="card-header">
                        <h3><i class="fas fa-map-marker-alt"></i> Localização GPS da Equipa</h3>
                        <span class="badge badge-success">Patrão vê em tempo real</span>
                    </div>

                    <div class="gps-tracker">
                        <div class="gps-info">
                            <i class="fas fa-satellite" style="font-size: 3rem;"></i>
                            <div class="gps-coordinates">
                                <div>Latitude: <strong id="gpsLat">52.5200° N</strong></div>
                                <div>Longitude: <strong id="gpsLng">13.4050° E</strong></div>
                            </div>
                        </div>
                        <div style="text-align: center;">
                            <p>Localização atual: <strong>Berlim, Kreuzberg - Obra de Saneamento</strong></p>
                            <div class="time-buttons">
                                <button class="btn-dashboard btn-success" onclick="updateGPSLocation()">
                                    <i class="fas fa-sync-alt"></i> Atualizar Localização
                                </button>
                                <button class="btn-dashboard btn-primary" onclick="sendLocationToBoss()">
                                    <i class="fas fa-paper-plane"></i> Enviar ao Patrão
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ============ DASHBOARD DE COMPRAS ============ -->
    <div class="dashboard purchase-dashboard" id="purchaseDashboard">
        <div class="top-bar">
            <div class="container top-bar-content">
                <div class="dashboard-brand">
                    <i class="fas fa-shopping-cart"></i>
                    <h1>Responsável de Compras - MAFC</h1>
                </div>
                <div class="dashboard-info">
                    <div class="user-info">
                        <i class="fas fa-user-tie"></i>
                        <span id="purchaseUserName">Departamento Compras</span>
                    </div>
                    <div id="purchaseCurrentTime">10:45 AM</div>
                    <button class="logout-btn" id="purchaseLogoutBtn">
                        <i class="fas fa-sign-out-alt"></i> Sair
                    </button>
                </div>
            </div>
        </div>

        <nav class="horizontal-menu">
            <div class="container menu-container">
                <a href="#" class="menu-item active" data-section="purchaseOverview">
                    <i class="fas fa-tachometer-alt"></i> Visão Geral
                </a>
                <a href="#" class="menu-item" data-section="pendingRequests">
                    <i class="fas fa-clipboard-list"></i> Pedidos Pendentes
                    <span class="menu-badge">12</span>
                </a>
                <a href="#" class="menu-item" data-section="approvedPurchases">
                    <i class="fas fa-check-circle"></i> Compras Aprovadas
                    <span class="menu-badge">24</span>
                </a>
                <a href="#" class="menu-item" data-section="suppliers">
                    <i class="fas fa-truck"></i> Fornecedores
                </a>
                <a href="#" class="menu-item" data-section="budget">
                    <i class="fas fa-chart-pie"></i> Orçamento
                </a>
                <a href="#" class="menu-item" data-section="purchaseReports">
                    <i class="fas fa-file-invoice"></i> Faturas
                </a>
            </div>
        </nav>

        <div class="dashboard-content">
            <div class="dashboard-section active" id="purchaseOverviewSection">
                <div class="stats-row">
                    <div class="stat-card-horizontal">
                        <div class="stat-icon"><i class="fas fa-clock"></i></div>
                        <div class="stat-info"><h3 id="pendingCount">12</h3><p>Pedidos Pendentes</p></div>
                    </div>
                    <div class="stat-card-horizontal">
                        <div class="stat-icon"><i class="fas fa-check"></i></div>
                        <div class="stat-info"><h3 id="approvedCount">24</h3><p>Compras Aprovadas</p></div>
                    </div>
                    <div class="stat-card-horizontal">
                        <div class="stat-icon"><i class="fas fa-euro-sign"></i></div>
                        <div class="stat-info"><h3 id="monthBudget">18.5K</h3><p>Orçamento Mês (€)</p></div>
                    </div>
                    <div class="stat-card-horizontal">
                        <div class="stat-icon"><i class="fas fa-truck"></i></div>
                        <div class="stat-info"><h3 id="suppliersCount">8</h3><p>Fornecedores Ativos</p></div>
                    </div>
                </div>

                <div class="content-grid">
                    <div class="content-card">
                        <div class="card-header">
                            <h3><i class="fas fa-exclamation-triangle"></i> Pedidos Urgentes</h3>
                            <button class="btn-dashboard btn-warning" onclick="processAllUrgent()">
                                <i class="fas fa-bolt"></i> Processar Todos
                            </button>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Equipa</th>
                                    <th>Material</th>
                                    <th>Quantidade</th>
                                    <th>Urgência</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="urgentPurchaseRequests"></tbody>
                        </table>
                    </div>

                    <div class="content-card">
                        <div class="card-header">
                            <h3><i class="fas fa-shopping-cart"></i> Últimas Compras</h3>
                            <button class="btn-dashboard btn-primary" onclick="newPurchase()">
                                <i class="fas fa-plus"></i> Nova Compra
                            </button>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Nº Encomenda</th>
                                    <th>Fornecedor</th>
                                    <th>Material</th>
                                    <th>Valor</th>
                                    <th>Entrega</th>
                                    <th>WhatsApp</th>
                                </tr>
                            </thead>
                            <tbody id="recentPurchases"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="dashboard-section" id="pendingRequestsSection">
                <div class="content-card">
                    <div class="card-header">
                        <h3><i class="fas fa-clipboard-list"></i> Todos os Pedidos Pendentes</h3>
                        <div>
                            <button class="btn-dashboard btn-success" onclick="approveAll()">
                                <i class="fas fa-check-double"></i> Aprovar Todos
                            </button>
                            <button class="btn-dashboard btn-danger" onclick="rejectAll()">
                                <i class="fas fa-ban"></i> Recusar Todos
                            </button>
                        </div>
                    </div>

                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Equipa</th>
                                <th>Material</th>
                                <th>Quantidade</th>
                                <th>Urgência</th>
                                <th>Pedido por</th>
                                <th>WhatsApp</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="allPendingRequests"></tbody>
                    </table>
                </div>
            </div>

            <div class="dashboard-section" id="approvedPurchasesSection">
                <div class="content-card">
                    <div class="card-header">
                        <h3><i class="fas fa-check-circle"></i> Compras Aprovadas e Encomendadas</h3>
                        <button class="btn-dashboard btn-primary" onclick="registerNewOrder()">
                            <i class="fas fa-plus"></i> Nova Encomenda
                        </button>
                    </div>

                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Nº Encomenda</th>
                                <th>Fornecedor</th>
                                <th>Material</th>
                                <th>Quantidade</th>
                                <th>Valor</th>
                                <th>Data Entrega</th>
                                <th>Estado</th>
                                <th>WhatsApp</th>
                                <th>Fatura</th>
                            </tr>
                        </thead>
                        <tbody id="approvedPurchasesTable"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- ============ DASHBOARD ESCRITÓRIO ============ -->
    <div class="dashboard office-dashboard" id="officeDashboard">
        <div class="top-bar">
            <div class="container top-bar-content">
                <div class="dashboard-brand">
                    <i class="fas fa-building"></i>
                    <h1>Escritório - MAFC Team Control</h1>
                </div>
                <div class="dashboard-info">
                    <div class="user-info">
                        <i class="fas fa-user-tie"></i>
                        <span id="officeUserName">Empregado Escritório</span>
                    </div>
                    <div id="officeCurrentTime">10:45 AM</div>
                    <button class="logout-btn" id="officeLogoutBtn">
                        <i class="fas fa-sign-out-alt"></i> Sair
                    </button>
                </div>
            </div>
        </div>

        <nav class="horizontal-menu">
            <div class="container menu-container">
                <a href="#" class="menu-item active" data-section="officeTime">
                    <i class="fas fa-clock"></i> Marcar Horas
                </a>
                <a href="#" class="menu-item" data-section="officeReports">
                    <i class="fas fa-file-alt"></i> Meu Extrato
                </a>
                <a href="#" class="menu-item" data-section="officeDocuments">
                    <i class="fas fa-folder"></i> Documentos
                </a>
                <a href="#" class="menu-item" data-section="officeRequests">
                    <i class="fas fa-hand-paper"></i> Pedidos
                </a>
            </div>
        </nav>

        <div class="dashboard-content">
            <div class="dashboard-section active" id="officeTimeSection">
                <div class="content-card">
                    <div class="card-header">
                        <h3><i class="fas fa-clock"></i> Controlo de Horas - Escritório</h3>
                        <div class="time-display" style="font-size: 2.5rem; color: var(--office);" id="officeClock">
                            08:45:23
                        </div>
                    </div>

                    <div class="stats-row">
                        <div class="stat-card-horizontal">
                            <div class="stat-icon"><i class="fas fa-sign-in-alt"></i></div>
                            <div class="stat-info"><h3 id="officeTodayEntry">--:--</h3><p>Entrada Hoje</p></div>
                        </div>
                        <div class="stat-card-horizontal">
                            <div class="stat-icon"><i class="fas fa-sign-out-alt"></i></div>
                            <div class="stat-info"><h3 id="officeTodayExit">--:--</h3><p>Saída Hoje</p></div>
                        </div>
                        <div class="stat-card-horizontal">
                            <div class="stat-icon"><i class="fas fa-business-time"></i></div>
                            <div class="stat-info"><h3 id="officeMonthHours">0</h3><p>Horas Mês</p></div>
                        </div>
                        <div class="stat-card-horizontal">
                            <div class="stat-icon"><i class="fas fa-coffee"></i></div>
                            <div class="stat-info"><h3 id="officeStatus">Ausente</h3><p>Estado</p></div>
                        </div>
                    </div>

                    <div class="time-buttons" style="margin-top: 30px;">
                        <button class="btn-dashboard btn-success" style="padding: 15px 30px; font-size: 1.2rem;" onclick="officeClockIn()">
                            <i class="fas fa-sign-in-alt"></i> MARCAR ENTRADA
                        </button>
                        <button class="btn-dashboard btn-danger" style="padding: 15px 30px; font-size: 1.2rem;" onclick="officeClockOut()">
                            <i class="fas fa-sign-out-alt"></i> MARCAR SAÍDA
                        </button>
                        <button class="btn-dashboard btn-warning" style="padding: 15px 30px; font-size: 1.2rem;" onclick="officePause()">
                            <i class="fas fa-coffee"></i> PAUSA
                        </button>
                    </div>

                    <h3 style="margin-top: 30px; margin-bottom: 15px;"><i class="fas fa-history"></i> Registos da Semana</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Entrada</th>
                                <th>Saída</th>
                                <th>Pausa</th>
                                <th>Total</th>
                            </tr>
                        </thead>
                        <tbody id="officeWeekRecords"></tbody>
                    </table>
                </div>
            </div>

            <div class="dashboard-section" id="officeReportsSection">
                <div class="content-card">
                    <div class="card-header">
                        <h3><i class="fas fa-file-invoice"></i> Meu Extrato Mensal</h3>
                        <button class="btn-dashboard btn-primary" onclick="generateOfficeReport()">
                            <i class="fas fa-sync-alt"></i> Atualizar
                        </button>
                    </div>

                    <div class="form-row">
                        <div class="form-group-dashboard">
                            <label>Mês/Ano</label>
                            <select id="officeReportMonth">
                                <option value="12-2024">Dezembro 2024</option>
                                <option value="11-2024">Novembro 2024</option>
                            </select>
                        </div>
                    </div>

                    <div class="monthly-report">
                        <div class="report-header">
                            <h4 id="officeReportTitle">Extrato - Dezembro 2024</h4>
                            <span class="badge badge-success" id="officeTotalHours">160 horas</span>
                        </div>
                        
                        <table class="time-sheet-table">
                            <thead>
                                <tr>
                                    <th>Dia</th>
                                    <th>Entrada</th>
                                    <th>Saída</th>
                                    <th>Horas</th>
                                    <th>Extra</th>
                                </tr>
                            </thead>
                            <tbody id="officeReportBody"></tbody>
                        </table>
                        
                        <div class="report-actions">
                            <button class="btn-dashboard btn-primary" onclick="printOfficeReport()">
                                <i class="fas fa-print"></i> Imprimir (Drucker)
                            </button>
                            <button class="btn-dashboard btn-success" onclick="emailOfficeReport()">
                                <i class="fas fa-envelope"></i> Email Contabilidade
                            </button>
                            <button class="btn-dashboard btn-whatsapp" onclick="whatsAppOfficeReport()">
                                <i class="fab fa-whatsapp"></i> WhatsApp
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ============ MODAL GESTÃO DE EMPREGADOS ============ -->
    <div class="modal-employee" id="employeeModal">
        <div class="modal-employee-content">
            <span class="close-employee-modal">&times;</span>
            <h2><i class="fas fa-user-plus"></i> Gestão de Empregados</h2>
            <div class="employee-form">
                <div class="form-row">
                    <div class="form-group-dashboard">
                        <label>Nome Completo</label>
                        <input type="text" id="employeeName" placeholder="Nome do empregado">
                    </div>
                    <div class="form-group-dashboard">
                        <label>Número de WhatsApp</label>
                        <input type="tel" id="employeeWhatsApp" placeholder="+351 912 345 678">
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-dashboard btn-success" onclick="saveEmployee()">
                        <i class="fas fa-save"></i> Guardar Empregado
                    </button>
                    <button type="button" class="btn-dashboard btn-danger" onclick="closeEmployeeModal()">
                        <i class="fas fa-times"></i> Cancelar
                    </button>
                </div>
            </div>
            
            <div style="margin-top: 30px;">
                <h3><i class="fas fa-list"></i> Empregados da Equipa</h3>
                <table class="data-table" style="margin-top: 15px;">
                    <thead>
                        <tr>
                            <th>Nome</th>
                            <th>WhatsApp</th>
                            <th>Cargo</th>
                            <th>Estado</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody id="employeesList"></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- ============ MODAL EXTRATO MENSAL ============ -->
    <div class="modal-monthly-report" id="monthlyReportModal">
        <div class="modal-monthly-report-content">
            <span class="close-report-modal">&times;</span>
            <h2><i class="fas fa-file-invoice"></i> Extrato Mensal - Horas Trabalhadas</h2>
            
            <div class="form-row">
                <div class="form-group-dashboard">
                    <label>Mês/Ano</label>
                    <select id="reportMonth">
                        <option value="12-2024">Dezembro 2024</option>
                        <option value="11-2024">Novembro 2024</option>
                    </select>
                </div>
            </div>
            
            <div class="monthly-report">
                <div class="report-header">
                    <h4 id="reportTitle">Extrato de Horas - Dezembro 2024</h4>
                    <span class="badge badge-success" id="totalHours">160 horas</span>
                </div>
                
                <table class="time-sheet-table" id="timeSheetTable">
                    <thead>
                        <tr>
                            <th>Data</th>
                            <th>Entrada</th>
                            <th>Saída</th>
                            <th>Horas</th>
                            <th>Extra</th>
                        </tr>
                    </thead>
                    <tbody id="timeSheetBody"></tbody>
                </table>
                
                <div class="report-actions">
                    <button class="btn-dashboard btn-primary" onclick="printReport()">
                        <i class="fas fa-print"></i> Imprimir (Drucker)
                    </button>
                    <button class="btn-dashboard btn-success" onclick="sendReportEmail()">
                        <i class="fas fa-envelope"></i> Enviar por Email
                    </button>
                    <button class="btn-dashboard btn-whatsapp" onclick="sendReportWhatsApp()">
                        <i class="fab fa-whatsapp"></i> Enviar WhatsApp
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ============ SISTEMA COMPLETO MAFC ============
        const MAFCSystem = {
            credentials: {
                boss: [
                    { code: 'mafc', password: '1234', name: 'Administrador MAFC' },
                    { code: 'patrao', password: 'admin123', name: 'Patrão Portugal' }
                ],
                team: [
                    { code: 'equipa01', password: '1234', name: 'João Silva', team: 'Equipa 01 - Berlin' },
                    { code: 'equipa02', password: '1234', name: 'Carlos Mendes', team: 'Equipa 02 - Hamburg' }
                ],
                purchase: [
                    { code: 'compras', password: '1234', name: 'Responsável Compras' }
                ],
                office: [
                    { code: 'escritorio', password: '1234', name: 'Maria Silva', department: 'Administração' }
                ]
            },
            
            teams: [
                { id: 1, name: 'Equipa 01 - Berlin', leader: 'João Silva', location: 'Berlim, Kreuzberg', workers: 5, status: 'working', gps: '52.5200° N, 13.4050° E' }
            ],
            
            employees: {
                'Equipa 01 - Berlin': [
                    { id: 1, name: 'João Silva', whatsapp: '+351912345678', position: 'Chefe', salary: 2500, status: 'active', startDate: '2020-01-15' }
                ]
            },
            
            timeRecords: {
                'Equipa 01 - Berlin': {},
                'Escritório': {}
            },
            
            materials: {
                construction: [
                    { id: 1, name: 'Cimento', unit: 'sacos', averagePrice: 5 }
                ]
            },
            
            materialRequests: [],
            purchases: []
        };
        
        let currentUser = null;
        let editingEmployeeId = null;
        
        // ============ FUNÇÕES DE LOGIN ============
        document.getElementById('openLogin').addEventListener('click', (e) => {
            e.preventDefault();
            document.getElementById('loginModal').style.display = 'flex';
        });
        
        document.querySelector('.close-modal').addEventListener('click', () => {
            document.getElementById('loginModal').style.display = 'none';
        });
        
        window.addEventListener('click', (e) => {
            if (e.target === document.getElementById('loginModal')) {
                document.getElementById('loginModal').style.display = 'none';
            }
        });
        
        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const role = document.getElementById('role').value;
            
            let userFound = null;
            
            if (role === 'boss') {
                userFound = MAFCSystem.credentials.boss.find(u => 
                    u.code === username && u.password === password
                );
            } else if (role === 'team') {
                userFound = MAFCSystem.credentials.team.find(u => 
                    u.code === username && u.password === password
                );
            } else if (role === 'purchase') {
                userFound = MAFCSystem.credentials.purchase.find(u => 
                    u.code === username && u.password === password
                );
            } else if (role === 'office') {
                userFound = MAFCSystem.credentials.office.find(u => 
                    u.code === username && u.password === password
                );
            }
            
            if (userFound) {
                currentUser = { ...userFound, role };
                loginSuccess();
            } else {
                alert('❌ Credenciais incorretas! Utilize:\n\nPATRÃO: mafc / 1234\nCHEFE: equipa01 / 1234\nCOMPRAS: compras / 1234\nESCRITÓRIO: escritorio / 1234');
            }
        });
        
        function loginSuccess() {
            document.getElementById('loginModal').style.display = 'none';
            document.getElementById('publicWebsite').style.display = 'none';
            
            if (currentUser.role === 'boss') {
                showBossDashboard();
            } else if (currentUser.role === 'team') {
                showTeamDashboard();
            } else if (currentUser.role === 'purchase') {
                showPurchaseDashboard();
            } else if (currentUser.role === 'office') {
                showOfficeDashboard();
            }
            
            initializeDashboard();
        }
        
        // ============ DASHBOARD DO PATRÃO ============
        function showBossDashboard() {
            document.getElementById('bossDashboard').style.display = 'block';
            document.getElementById('bossUserName').textContent = currentUser.name;
            updateActiveMenu('boss');
            loadBossData();
        }
        
        function loadBossData() {
            const teamsTable = document.getElementById('bossTeamsTable');
            teamsTable.innerHTML = '';
            
            MAFCSystem.teams.forEach(team => {
                const statusBadge = team.status === 'working' ? 
                    '<span class="badge badge-success">A Trabalhar</span>' :
                    '<span class="badge badge-warning">Parado</span>';
                
                const row = `
                    <tr>
                        <td><strong>${team.name}</strong></td>
                        <td>${team.location}</td>
                        <td>Saneamento Urbano</td>
                        <td>${statusBadge}</td>
                        <td>${team.gps.split(',')[0]}</td>
                    </tr>
                `;
                teamsTable.innerHTML += row;
            });
            
            const allTeamsTable = document.getElementById('allTeamsTable');
            allTeamsTable.innerHTML = '';
            
            MAFCSystem.teams.forEach(team => {
                const row = `
                    <tr>
                        <td>#${team.id.toString().padStart(3, '0')}</td>
                        <td><strong>${team.name}</strong></td>
                        <td>${team.leader}</td>
                        <td>${team.location}</td>
                        <td>Saneamento Urbano</td>
                        <td>${team.workers} trabalhadores</td>
                        <td>
                            <button class="btn-dashboard btn-primary btn-sm" onclick="viewTeamDetails(${team.id})">
                                <i class="fas fa-eye"></i>
                            </button>
                        </td>
                    </tr>
                `;
                allTeamsTable.innerHTML += row;
            });
        }
        
        // ============ DASHBOARD DO CHEFE DE EQUIPA ============
        function showTeamDashboard() {
            document.getElementById('teamDashboard').style.display = 'block';
            document.getElementById('teamUserName').textContent = currentUser.team || currentUser.name;
            updateActiveMenu('team');
            loadTeamData();
        }
        
        function loadTeamData() {
            const teamData = MAFCSystem.teams.find(t => t.name === currentUser.team);
            
            if (teamData) {
                const employees = MAFCSystem.employees[currentUser.team] || [];
                document.getElementById('teamWorkersCount').textContent = employees.length;
                document.getElementById('teamPendingMaterials').textContent = '3';
                document.getElementById('teamStatus').textContent = teamData.status === 'working' ? 'Online' : 'Offline';
                
                document.getElementById('gpsLat').textContent = teamData.gps.split(',')[0];
                document.getElementById('gpsLng').textContent = teamData.gps.split(',')[1];
                
                loadEmployeesList();
                loadDailyTimeRecords();
            }
        }
        
        function loadEmployeesList() {
            const employees = MAFCSystem.employees[currentUser.team] || [];
            const workerSelect = document.getElementById('workerSelect');
            const teamEmployeesTable = document.getElementById('teamEmployeesTable');
            const teamReportEmployee = document.getElementById('teamReportEmployee');
            
            workerSelect.innerHTML = '<option value="">Selecione um trabalhador</option>';
            teamReportEmployee.innerHTML = '<option value="all">Todos os Empregados</option>';
            teamEmployeesTable.innerHTML = '';
            
            employees.forEach(emp => {
                const option = document.createElement('option');
                option.value = emp.id;
                option.textContent = emp.name;
                workerSelect.appendChild(option);
                
                const reportOption = document.createElement('option');
                reportOption.value = emp.id;
                reportOption.textContent = emp.name;
                teamReportEmployee.appendChild(reportOption);
                
                const statusBadge = emp.status === 'active' ? 
                    '<span class="badge badge-success">Ativo</span>' :
                    '<span class="badge badge-danger">Inativo</span>';
                
                const row = `
                    <tr>
                        <td>${emp.name}</td>
                        <td>${emp.whatsapp}</td>
                        <td>${emp.position}</td>
                        <td>${emp.salary}€</td>
                        <td>${statusBadge}</td>
                        <td>
                            <button class="btn-dashboard btn-warning btn-sm" onclick="editEmployee(${emp.id})">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn-dashboard btn-success btn-sm" onclick="viewEmployeeReport(${emp.id})">
                                <i class="fas fa-file-alt"></i>
                            </button>
                        </td>
                    </tr>
                `;
                teamEmployeesTable.innerHTML += row;
            });
        }
        
        function loadDailyTimeRecords() {
            const table = document.getElementById('teamTimeRecords');
            const employees = MAFCSystem.employees[currentUser.team] || [];
            
            table.innerHTML = '';
            
            employees.forEach(emp => {
                const today = new Date().toLocaleDateString('pt-PT');
                const timeRecords = MAFCSystem.timeRecords[currentUser.team] || {};
                const empRecords = timeRecords[today] || {};
                const empToday = empRecords[emp.id] || {};
                
                const row = `
                    <tr>
                        <td>${emp.name}</td>
                        <td>${empToday.entry || '--:--'}</td>
                        <td>${empToday.exit || '--:--'}</td>
                        <td>${empToday.total || '0h'}</td>
                        <td>
                            <a href="https://wa.me/${emp.whatsapp.replace('+', '')}" target="_blank" class="btn-dashboard btn-whatsapp btn-sm">
                                <i class="fab fa-whatsapp"></i>
                            </a>
                        </td>
                    </tr>
                `;
                table.innerHTML += row;
            });
        }
        
        // ============ GESTÃO DE EMPREGADOS ============
        function openEmployeeModal() {
            editingEmployeeId = null;
            document.getElementById('employeeModal').style.display = 'flex';
            
            document.getElementById('employeeName').value = '';
            document.getElementById('employeeWhatsApp').value = '+351 ';
            document.getElementById('employeeStartDate').value = new Date().toISOString().split('T')[0];
            
            loadModalEmployeesList();
        }
        
        function closeEmployeeModal() {
            document.getElementById('employeeModal').style.display = 'none';
        }
        
        function loadModalEmployeesList() {
            const employeesList = document.getElementById('employeesList');
            const employees = MAFCSystem.employees[currentUser.team] || [];
            
            employeesList.innerHTML = '';
            
            employees.forEach(emp => {
                const statusBadge = emp.status === 'active' ? 
                    '<span class="badge badge-success">Ativo</span>' :
                    '<span class="badge badge-danger">Inativo</span>';
                
                const row = `
                    <tr>
                        <td>${emp.name}</td>
                        <td>${emp.whatsapp}</td>
                        <td>${emp.position}</td>
                        <td>${statusBadge}</td>
                        <td>
                            <button class="btn-dashboard btn-warning btn-sm" onclick="editEmployee(${emp.id})">
                                <i class="fas fa-edit"></i>
                            </button>
                        </td>
                    </tr>
                `;
                employeesList.innerHTML += row;
            });
        }
        
        function saveEmployee() {
            const name = document.getElementById('employeeName').value;
            const whatsapp = document.getElementById('employeeWhatsApp').value;
            const startDate = document.getElementById('employeeStartDate').value;
            
            if (!name || !whatsapp) {
                alert('Por favor, preencha pelo menos o nome e WhatsApp!');
                return;
            }
            
            if (!MAFCSystem.employees[currentUser.team]) {
                MAFCSystem.employees[currentUser.team] = [];
            }
            
            if (editingEmployeeId) {
                const index = MAFCSystem.employees[currentUser.team].findIndex(e => e.id === editingEmployeeId);
                if (index !== -1) {
                    MAFCSystem.employees[currentUser.team][index] = {
                        ...MAFCSystem.employees[currentUser.team][index],
                        name,
                        whatsapp,
                        startDate
                    };
                }
            } else {
                const newId = MAFCSystem.employees[currentUser.team].length > 0 ? 
                    Math.max(...MAFCSystem.employees[currentUser.team].map(e => e.id)) + 1 : 1;
                
                MAFCSystem.employees[currentUser.team].push({
                    id: newId,
                    name,
                    whatsapp,
                    position: 'Trabalhador',
                    salary: 1200,
                    startDate,
                    status: 'active'
                });
            }
            
            alert(`✅ Empregado ${editingEmployeeId ? 'editado' : 'adicionado'} com sucesso!`);
            
            loadEmployeesList();
            loadModalEmployeesList();
            loadDailyTimeRecords();
            
            closeEmployeeModal();
        }
        
        function editEmployee(id) {
            const employees = MAFCSystem.employees[currentUser.team] || [];
            const employee = employees.find(e => e.id === id);
            
            if (employee) {
                editingEmployeeId = id;
                document.getElementById('employeeModal').style.display = 'flex';
                
                document.getElementById('employeeName').value = employee.name;
                document.getElementById('employeeWhatsApp').value = employee.whatsapp;
                document.getElementById('employeeStartDate').value = employee.startDate;
                
                loadModalEmployeesList();
            }
        }
        
        // ============ CONTROLO DE HORAS INDIVIDUAL ============
        function loadWorkerWhatsApp() {
            const workerSelect = document.getElementById('workerSelect');
            const selectedId = parseInt(workerSelect.value);
            const whatsappInput = document.getElementById('workerWhatsApp');
            
            if (selectedId) {
                const employees = MAFCSystem.employees[currentUser.team] || [];
                const employee = employees.find(e => e.id === selectedId);
                
                if (employee) {
                    whatsappInput.value = employee.whatsapp;
                } else {
                    whatsappInput.value = '';
                }
            } else {
                whatsappInput.value = '';
            }
        }
        
        function registerIndividualTime() {
            const workerSelect = document.getElementById('workerSelect');
            const timeAction = document.getElementById('timeAction');
            const selectedId = parseInt(workerSelect.value);
            
            if (!selectedId) {
                alert('Por favor, selecione um trabalhador!');
                return;
            }
            
            const employees = MAFCSystem.employees[currentUser.team] || [];
            const employee = employees.find(e => e.id === selectedId);
            
            if (!employee) {
                alert('Trabalhador não encontrado!');
                return;
            }
            
            const action = timeAction.value;
            const time = new Date();
            const timeString = time.toLocaleTimeString('pt-PT', { hour: '2-digit', minute: '2-digit' });
            const dateString = time.toLocaleDateString('pt-PT');
            
            if (!MAFCSystem.timeRecords[currentUser.team]) {
                MAFCSystem.timeRecords[currentUser.team] = {};
            }
            if (!MAFCSystem.timeRecords[currentUser.team][dateString]) {
                MAFCSystem.timeRecords[currentUser.team][dateString] = {};
            }
            
            if (action === 'start') {
                MAFCSystem.timeRecords[currentUser.team][dateString][selectedId] = {
                    ...MAFCSystem.timeRecords[currentUser.team][dateString][selectedId],
                    entry: timeString,
                    employeeName: employee.name
                };
                
                alert(`✅ Entrada registada para ${employee.name} às ${timeString}`);
            } else {
                const empRecord = MAFCSystem.timeRecords[currentUser.team][dateString][selectedId] || {};
                
                if (!empRecord.entry) {
                    alert('❌ Primeiro precisa registar a entrada!');
                    return;
                }
                
                const entryTime = empRecord.entry;
                const [entryHours, entryMinutes] = entryTime.split(':').map(Number);
                const [exitHours, exitMinutes] = timeString.split(':').map(Number);
                
                let totalMinutes = (exitHours * 60 + exitMinutes) - (entryHours * 60 + entryMinutes);
                if (totalMinutes < 0) totalMinutes += 24 * 60;
                
                const hours = Math.floor(totalMinutes / 60);
                const minutes = totalMinutes % 60;
                const totalTime = `${hours}h${minutes > 0 ? `${minutes}m` : ''}`;
                
                const normalHours = 8 * 60;
                const extraMinutes = Math.max(0, totalMinutes - normalHours);
                const extraHours = extraMinutes > 0 ? `${Math.floor(extraMinutes / 60)}h${extraMinutes % 60}m` : '0';
                
                MAFCSystem.timeRecords[currentUser.team][dateString][selectedId] = {
                    ...empRecord,
                    exit: timeString,
                    total: totalTime,
                    extra: extraHours
                };
                
                alert(`✅ Saída registada para ${employee.name} às ${timeString}\n\nHoras trabalhadas: ${totalTime}\nHoras extra: ${extraHours}`);
            }
            
            loadDailyTimeRecords();
        }
        
        function sendWhatsAppReminder() {
            const workerSelect = document.getElementById('workerSelect');
            const selectedId = parseInt(workerSelect.value);
            
            if (!selectedId) {
                alert('Por favor, selecione um trabalhador!');
                return;
            }
            
            const employees = MAFCSystem.employees[currentUser.team] || [];
            const employee = employees.find(e => e.id === selectedId);
            
            if (employee) {
                const message = `⏰ Lembrete: Por favor, registe as suas horas no sistema MAFC Team Control`;
                const whatsappUrl = `https://wa.me/${employee.whatsapp.replace('+', '')}?text=${encodeURIComponent(message)}`;
                window.open(whatsappUrl, '_blank');
            }
        }
        
        function registerAllTeam(action) {
            const employees = MAFCSystem.employees[currentUser.team] || [];
            const time = new Date().toLocaleTimeString('pt-PT', { hour: '2-digit', minute: '2-digit' });
            const dateString = new Date().toLocaleDateString('pt-PT');
            
            employees.forEach(emp => {
                if (emp.status === 'active') {
                    if (!MAFCSystem.timeRecords[currentUser.team]) {
                        MAFCSystem.timeRecords[currentUser.team] = {};
                    }
                    if (!MAFCSystem.timeRecords[currentUser.team][dateString]) {
                        MAFCSystem.timeRecords[currentUser.team][dateString] = {};
                    }
                    
                    if (action === 'start') {
                        MAFCSystem.timeRecords[currentUser.team][dateString][emp.id] = {
                            ...MAFCSystem.timeRecords[currentUser.team][dateString][emp.id],
                            entry: time,
                            employeeName: emp.name
                        };
                    }
                }
            });
            
            alert(`✅ ${action === 'start' ? 'Entrada' : 'Saída'} registada para TODA A EQUIPA às ${time}`);
            loadDailyTimeRecords();
        }
        
        // ============ EXTRATO MENSAL ============
        function openMonthlyReportModal() {
            document.getElementById('monthlyReportModal').style.display = 'flex';
            generateMonthlyReport();
        }
        
        function closeMonthlyReportModal() {
            document.getElementById('monthlyReportModal').style.display = 'none';
        }
        
        function generateMonthlyReport() {
            const monthSelect = document.getElementById('teamReportMonth');
            const employeeSelect = document.getElementById('teamReportEmployee');
            
            const [month, year] = monthSelect.value.split('-');
            const employeeId = employeeSelect.value === 'all' ? null : parseInt(employeeSelect.value);
            
            let employeeName = 'Todos os Empregados';
            if (employeeId) {
                const employees = MAFCSystem.employees[currentUser.team] || [];
                const employee = employees.find(e => e.id === employeeId);
                if (employee) {
                    employeeName = employee.name;
                }
            }
            
            const monthNames = ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 
                               'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];
            const monthName = monthNames[parseInt(month) - 1];
            
            document.getElementById('teamReportTitle').textContent = 
                `Extrato - ${employeeName} | ${monthName} ${year}`;
            
            const timeSheetBody = document.getElementById('teamTimeSheetBody');
            timeSheetBody.innerHTML = '';
            
            let totalHours = 0;
            let totalExtra = 0;
            
            for (let day = 1; day <= 20; day++) {
                const date = `${day.toString().padStart(2, '0')}/${month.padStart(2, '0')}/${year}`;
                const hours = 8 + Math.random();
                const extra = Math.random() > 0.7 ? Math.random() * 2 : 0;
                
                totalHours += hours;
                totalExtra += extra;
                
                const row = `
                    <tr>
                        <td>${date}</td>
                        <td>${employeeName}</td>
                        <td>${hours.toFixed(1)}h</td>
                        <td>${extra > 0 ? extra.toFixed(1) + 'h' : '0'}</td>
                        <td>${(hours + extra).toFixed(1)}h</td>
                    </tr>
                `;
                timeSheetBody.innerHTML += row;
            }
            
            document.getElementById('teamTotalHours').textContent = 
                `${totalHours.toFixed(1)}h (${totalExtra.toFixed(1)} extra)`;
        }
        
        function printTeamReport() {
            alert('🖨️ Preparando para impressão...\n\nO relatório será enviado para a impressora padrão (Drucker).');
        }
        
        function sendTeamReportWhatsApp() {
            const reportTitle = document.getElementById('teamReportTitle').textContent;
            const totalHours = document.getElementById('teamTotalHours').textContent;
            
            const message = `📊 ${reportTitle}\n\nTotal de horas: ${totalHours}\n\nEnviado do sistema MAFC Team Control`;
            
            const whatsappUrl = `https://wa.me/351123456789?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }
        
        // ============ PEDIDOS DE MATERIAL ============
        function selectCategory(category) {
            document.querySelectorAll('.category-card').forEach(card => {
                card.style.borderColor = 'transparent';
            });
            
            event.currentTarget.style.borderColor = 'var(--team)';
            loadMaterialsByCategory(category);
        }
        
        function loadMaterialsByCategory(category) {
            const materials = MAFCSystem.materials[category] || [];
            const select = document.getElementById('materialSelect');
            
            select.innerHTML = '<option value="">Selecione um material</option>';
            materials.forEach(material => {
                const option = document.createElement('option');
                option.value = material.id;
                option.textContent = `${material.name} (${material.unit})`;
                select.appendChild(option);
            });
        }
        
        function submitMaterialRequest() {
            const category = document.getElementById('materialCategory').value;
            const materialSelect = document.getElementById('materialSelect');
            const materialId = materialSelect.value;
            const materialText = materialSelect.options[materialSelect.selectedIndex].text;
            const quantity = document.getElementById('materialQuantity').value;
            
            if (!materialId || !quantity) {
                alert('Por favor, selecione um material e quantidade!');
                return;
            }
            
            const request = {
                id: Date.now(),
                team: currentUser.team,
                material: materialText.split(' (')[0],
                quantity: quantity,
                date: new Date().toLocaleDateString('pt-PT'),
                status: 'pending',
                requestedBy: currentUser.name
            };
            
            MAFCSystem.materialRequests.push(request);
            
            const pendingCount = document.getElementById('teamPendingMaterials');
            pendingCount.textContent = parseInt(pendingCount.textContent) + 1;
            
            const table = document.getElementById('teamMaterialRequests');
            
            const row = `
                <tr>
                    <td>${materialText.split(' (')[0]}</td>
                    <td>${quantity}</td>
                    <td>${request.date}</td>
                    <td><span class="badge badge-info">Pendente</span></td>
                    <td>
                        <button class="btn-dashboard btn-whatsapp btn-sm" onclick="followUpRequestWhatsApp(${request.id})">
                            <i class="fab fa-whatsapp"></i>
                        </button>
                    </td>
                </tr>
            `;
            
            table.innerHTML = row + table.innerHTML;
            
            alert(`✅ Pedido enviado para o Departamento de Compras!\n\nMaterial: ${materialText}\nQuantidade: ${quantity}`);
        }
        
        function submitMaterialRequestWhatsApp() {
            submitMaterialRequest();
            
            const materialSelect = document.getElementById('materialSelect');
            const materialText = materialSelect.options[materialSelect.selectedIndex].text;
            const quantity = document.getElementById('materialQuantity').value;
            
            const message = `🛒 PEDIDO DE MATERIAL - ${currentUser.team}\n\nMaterial: ${materialText}\nQuantidade: ${quantity}\n\nPedido enviado via sistema MAFC.`;
            
            const whatsappUrl = `https://wa.me/351123456789?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }
        
        // ============ DASHBOARD DE COMPRAS ============
        function showPurchaseDashboard() {
            document.getElementById('purchaseDashboard').style.display = 'block';
            document.getElementById('purchaseUserName').textContent = currentUser.name;
            updateActiveMenu('purchase');
            loadPurchaseData();
        }
        
        function loadPurchaseData() {
            document.getElementById('pendingCount').textContent = MAFCSystem.materialRequests.length;
            document.getElementById('approvedCount').textContent = MAFCSystem.purchases.length;
            document.getElementById('monthBudget').textContent = '18.5K';
            document.getElementById('suppliersCount').textContent = '8';
        }
        
        function contactSupplierWhatsApp(requestId) {
            const request = MAFCSystem.materialRequests.find(r => r.id === requestId);
            if (request) {
                const message = `📞 CONTATO FORNECEDOR - MAFC\n\nNecessitamos de:\nMaterial: ${request.material}\nQuantidade: ${request.quantity}\n\nPor favor, envie orçamento.`;
                
                const whatsappUrl = `https://wa.me/351123456789?text=${encodeURIComponent(message)}`;
                window.open(whatsappUrl, '_blank');
            }
        }
        
        function contactTeamWhatsApp(teamName) {
            const message = `📞 DEPARTAMENTO DE COMPRAS - MAFC\n\nOlá ${teamName},\n\nRecebemos o seu pedido de material.\nEm breve entraremos em contacto.\n\nObrigado!`;
            
            const whatsappUrl = `https://wa.me/351123456789?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }
        
        // ============ DASHBOARD ESCRITÓRIO ============
        function showOfficeDashboard() {
            document.getElementById('officeDashboard').style.display = 'block';
            document.getElementById('officeUserName').textContent = currentUser.name;
            updateActiveMenu('office');
            loadOfficeData();
        }
        
        function loadOfficeData() {
            if (!MAFCSystem.timeRecords['Escritório']) {
                MAFCSystem.timeRecords['Escritório'] = {};
            }
            updateOfficeTodayRecords();
        }
        
        function officeClockIn() {
            const time = new Date();
            const timeString = time.toLocaleTimeString('pt-PT', { hour: '2-digit', minute: '2-digit' });
            const dateString = time.toLocaleDateString('pt-PT');
            
            if (!MAFCSystem.timeRecords['Escritório'][dateString]) {
                MAFCSystem.timeRecords['Escritório'][dateString] = {};
            }
            
            MAFCSystem.timeRecords['Escritório'][dateString].entry = timeString;
            MAFCSystem.timeRecords['Escritório'][dateString].employee = currentUser.name;
            
            document.getElementById('officeTodayEntry').textContent = timeString;
            document.getElementById('officeStatus').textContent = 'Presente';
            
            alert(`✅ Entrada registada às ${timeString}`);
            updateOfficeTodayRecords();
        }
        
        function officeClockOut() {
            const time = new Date();
            const timeString = time.toLocaleTimeString('pt-PT', { hour: '2-digit', minute: '2-digit' });
            const dateString = time.toLocaleDateString('pt-PT');
            
            if (!MAFCSystem.timeRecords['Escritório'][dateString] || !MAFCSystem.timeRecords['Escritório'][dateString].entry) {
                alert('❌ Primeiro precisa registar a entrada!');
                return;
            }
            
            const entryTime = MAFCSystem.timeRecords['Escritório'][dateString].entry;
            const [entryHours, entryMinutes] = entryTime.split(':').map(Number);
            const [exitHours, exitMinutes] = timeString.split(':').map(Number);
            
            let totalMinutes = (exitHours * 60 + exitMinutes) - (entryHours * 60 + entryMinutes);
            if (totalMinutes < 0) totalMinutes += 24 * 60;
            
            totalMinutes = Math.max(0, totalMinutes - 60);
            
            const hours = Math.floor(totalMinutes / 60);
            const minutes = totalMinutes % 60;
            const totalTime = `${hours}h${minutes > 0 ? `${minutes}m` : ''}`;
            
            MAFCSystem.timeRecords['Escritório'][dateString].exit = timeString;
            MAFCSystem.timeRecords['Escritório'][dateString].total = totalTime;
            
            document.getElementById('officeTodayExit').textContent = timeString;
            document.getElementById('officeStatus').textContent = 'Ausente';
            
            alert(`✅ Saída registada às ${timeString}\n\nHoras trabalhadas: ${totalTime} (com 1h de pausa)`);
            updateOfficeTodayRecords();
        }
        
        function updateOfficeTodayRecords() {
            const dateString = new Date().toLocaleDateString('pt-PT');
            const todayRecord = MAFCSystem.timeRecords['Escritório'][dateString] || {};
            
            document.getElementById('officeTodayEntry').textContent = todayRecord.entry || '--:--';
            document.getElementById('officeTodayExit').textContent = todayRecord.exit || '--:--';
            document.getElementById('officeStatus').textContent = todayRecord.entry ? 
                (todayRecord.exit ? 'Ausente' : 'Presente') : 'Ausente';
        }
        
        function generateOfficeReport() {
            const monthSelect = document.getElementById('officeReportMonth');
            const [month, year] = monthSelect.value.split('-');
            
            const monthNames = ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 
                               'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];
            const monthName = monthNames[parseInt(month) - 1];
            
            document.getElementById('officeReportTitle').textContent = 
                `Extrato - ${currentUser.name} | ${monthName} ${year}`;
            
            const tableBody = document.getElementById('officeReportBody');
            tableBody.innerHTML = '';
            
            let totalHours = 0;
            let totalExtra = 0;
            
            for (let day = 1; day <= 20; day++) {
                const date = `${day.toString().padStart(2, '0')}/${month.padStart(2, '0')}/${year}`;
                const hours = 8 + Math.random() * 0.5;
                const extra = Math.random() > 0.8 ? Math.random() * 1.5 : 0;
                
                totalHours += hours;
                totalExtra += extra;
                
                const row = `
                    <tr>
                        <td>Seg ${date}</td>
                        <td>08:${Math.floor(Math.random() * 30).toString().padStart(2, '0')}</td>
                        <td>17:${Math.floor(Math.random() * 30).toString().padStart(2, '0')}</td>
                        <td>${hours.toFixed(1)}h</td>
                        <td>${extra > 0 ? extra.toFixed(1) + 'h' : '0'}</td>
                    </tr>
                `;
                tableBody.innerHTML += row;
            }
            
            document.getElementById('officeMonthTotal').textContent = totalHours.toFixed(1) + 'h';
            document.getElementById('officeMonthExtra').textContent = totalExtra.toFixed(1) + 'h';
            document.getElementById('officeTotalHours').textContent = totalHours.toFixed(1) + ' horas';
            document.getElementById('officeMonthHours').textContent = Math.floor(totalHours);
        }
        
        function printOfficeReport() {
            alert('🖨️ Preparando para impressão...\n\nO extrato será enviado para a impressora padrão (Drucker).');
        }
        
        function emailOfficeReport() {
            const reportTitle = document.getElementById('officeReportTitle').textContent;
            const totalHours = document.getElementById('officeMonthTotal').textContent;
            
            const subject = encodeURIComponent(`Extrato Horas - ${currentUser.name}`);
            const body = encodeURIComponent(`Prezada Contabilidade,\n\nSegue extrato de horas:\n\n${reportTitle}\nTotal horas: ${totalHours}\n\nAtenciosamente,\n${currentUser.name}`);
            
            window.open(`mailto:contabilidade@mafc-filho.pt?subject=${subject}&body=${body}`);
        }
        
        // ============ FUNÇÕES COMUNS ============
        function updateActiveMenu(dashboard) {
            const currentDashboard = document.querySelector(`.${dashboard}-dashboard`);
            if (currentDashboard) {
                currentDashboard.querySelectorAll('.menu-item').forEach(item => {
                    item.classList.remove('active');
                });
                
                currentDashboard.querySelectorAll('.dashboard-section').forEach(section => {
                    section.classList.remove('active');
                });
                
                const firstMenuItem = currentDashboard.querySelector('.menu-item');
                if (firstMenuItem) {
                    firstMenuItem.classList.add('active');
                    const sectionId = firstMenuItem.getAttribute('data-section') + 'Section';
                    const section = document.getElementById(sectionId);
                    if (section) section.classList.add('active');
                }
            }
        }
        
        document.querySelectorAll('.menu-item').forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                
                const dashboard = this.closest('.dashboard');
                const sectionId = this.getAttribute('data-section') + 'Section';
                
                dashboard.querySelectorAll('.menu-item').forEach(i => {
                    i.classList.remove('active');
                });
                
                this.classList.add('active');
                
                dashboard.querySelectorAll('.dashboard-section').forEach(section => {
                    section.classList.remove('active');
                });
                
                const section = document.getElementById(sectionId);
                if (section) section.classList.add('active');
            });
        });
        
        // ============ FUNÇÕES DO PATRÃO ============
        function refreshLocations() {
            alert('📍 Localizações atualizadas em tempo real!');
        }
        
        function viewAllRequests() {
            alert('📋 Mostrando todos os pedidos de material pendentes...');
        }
        
        function addNewTeam() {
            alert('👷 Adicionar nova equipa...');
        }
        
        function viewTeamDetails(teamId) {
            const team = MAFCSystem.teams.find(t => t.id === teamId);
            if (team) {
                alert(`🔍 Detalhes da Equipa:\n\nNome: ${team.name}\nChefe: ${team.leader}\nLocalização: ${team.location}\nTrabalhadores: ${team.workers}`);
            }
        }
        
        function exportHours() {
            alert('📊 Exportando registos de horas para Excel...');
        }
        
        function simulateClockIn() {
            const time = new Date().toLocaleTimeString('pt-PT');
            alert(`⏰ Simulação de entrada registada às ${time}`);
        }
        
        function exportToAccounting() {
            alert('💰 Exportando dados para contabilidade...');
        }
        
        // ============ FUNÇÕES DE COMPRAS ============
        function processAllUrgent() {
            alert('⚡ Processando todos os pedidos urgentes...');
        }
        
        function approvePurchase(requestId) {
            alert(`✅ Pedido #${requestId} aprovado!`);
        }
        
        function rejectPurchase(requestId) {
            const reason = prompt('Motivo da recusa:');
            if (reason) {
                alert(`❌ Pedido #${requestId} recusado!\n\nMotivo: ${reason}`);
            }
        }
        
        function newPurchase() {
            alert('🛒 Criar nova compra manual...');
        }
        
        function approveAll() {
            if (confirm('Tem certeza que deseja aprovar TODOS os pedidos pendentes?')) {
                alert('✅ Todos os pedidos foram aprovados!');
            }
        }
        
        function rejectAll() {
            if (confirm('Tem certeza que deseja recusar TODOS os pedidos pendentes?')) {
                alert('❌ Todos os pedidos foram recusados!');
            }
        }
        
        function registerNewOrder() {
            alert('📝 Registar nova encomenda...');
        }
        
        // ============ FUNÇÕES GERAIS ============
        function initializeDashboard() {
            updateClocks();
            setInterval(updateClocks, 1000);
            
            if (currentUser.role === 'team') {
                loadMaterialsByCategory('construction');
            }
            
            document.querySelectorAll('.close-employee-modal, .close-report-modal').forEach(closeBtn => {
                closeBtn.addEventListener('click', function() {
                    this.closest('.modal-employee, .modal-monthly-report').style.display = 'none';
                });
            });
            
            window.addEventListener('click', function(e) {
                if (e.target.classList.contains('modal-employee')) {
                    document.getElementById('employeeModal').style.display = 'none';
                }
                if (e.target.classList.contains('modal-monthly-report')) {
                    document.getElementById('monthlyReportModal').style.display = 'none';
                }
            });
        }
        
        function updateClocks() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('pt-PT');
            const timeShort = now.toLocaleTimeString('pt-PT', { hour: '2-digit', minute: '2-digit' });
            
            document.querySelectorAll('#bossCurrentTime, #teamCurrentTime, #purchaseCurrentTime, #officeCurrentTime').forEach(el => {
                if (el) el.textContent = timeShort;
            });
            
            document.querySelectorAll('#bossCurrentTimeFull, #teamClock, #officeClock').forEach(el => {
                if (el) el.textContent = timeString;
            });
        }
        
        document.querySelectorAll('.logout-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                if (confirm('Tem certeza que deseja sair do sistema?')) {
                    document.querySelectorAll('.dashboard').forEach(d => {
                        d.style.display = 'none';
                    });
                    
                    document.getElementById('publicWebsite').style.display = 'block';
                    
                    document.querySelectorAll('.modal, .modal-employee, .modal-monthly-report').forEach(modal => {
                        modal.style.display = 'none';
                    });
                    
                    document.getElementById('loginForm').reset();
                    currentUser = null;
                    editingEmployeeId = null;
                }
            });
        });
        
        updateClocks();
        initializeDashboard();
        
        window.addEventListener('load', () => {
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    document.querySelectorAll('.modal, .modal-employee, .modal-monthly-report').forEach(modal => {
                        modal.style.display = 'none';
                    });
                }
            });
        });
    </script>
</body>
</html>
